(()=>{var t={9662:(t,e,r)=>{var n=r(614),o=r(6330),i=TypeError;t.exports=function(t){if(n(t))return t;throw i(o(t)+" is not a function")}},9483:(t,e,r)=>{var n=r(4411),o=r(6330),i=TypeError;t.exports=function(t){if(n(t))return t;throw i(o(t)+" is not a constructor")}},6077:(t,e,r)=>{var n=r(614),o=String,i=TypeError;t.exports=function(t){if("object"==typeof t||n(t))return t;throw i("Can't set "+o(t)+" as a prototype")}},1223:(t,e,r)=>{var n=r(5112),o=r(30),i=r(3070).f,s=n("unscopables"),a=Array.prototype;null==a[s]&&i(a,s,{configurable:!0,value:o(null)}),t.exports=function(t){a[s][t]=!0}},5787:(t,e,r)=>{var n=r(7976),o=TypeError;t.exports=function(t,e){if(n(e,t))return t;throw o("Incorrect invocation")}},9670:(t,e,r)=>{var n=r(111),o=String,i=TypeError;t.exports=function(t){if(n(t))return t;throw i(o(t)+" is not an object")}},7556:(t,e,r)=>{var n=r(7293);t.exports=n((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}}))},8533:(t,e,r)=>{"use strict";var n=r(2092).forEach,o=r(9341)("forEach");t.exports=o?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},8457:(t,e,r)=>{"use strict";var n=r(9974),o=r(6916),i=r(7908),s=r(3411),a=r(7659),c=r(4411),u=r(6244),l=r(6135),f=r(4121),h=r(1246),p=Array;t.exports=function(t){var e=i(t),r=c(this),d=arguments.length,y=d>1?arguments[1]:void 0,v=void 0!==y;v&&(y=n(y,d>2?arguments[2]:void 0));var g,m,b,w,x,O,S=h(e),E=0;if(!S||this===p&&a(S))for(g=u(e),m=r?new this(g):p(g);g>E;E++)O=v?y(e[E],E):e[E],l(m,E,O);else for(x=(w=f(e,S)).next,m=r?new this:[];!(b=o(x,w)).done;E++)O=v?s(w,y,[b.value,E],!0):b.value,l(m,E,O);return m.length=E,m}},1318:(t,e,r)=>{var n=r(5656),o=r(1400),i=r(6244),s=function(t){return function(e,r,s){var a,c=n(e),u=i(c),l=o(s,u);if(t&&r!=r){for(;u>l;)if((a=c[l++])!=a)return!0}else for(;u>l;l++)if((t||l in c)&&c[l]===r)return t||l||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},2092:(t,e,r)=>{var n=r(9974),o=r(1702),i=r(8361),s=r(7908),a=r(6244),c=r(5417),u=o([].push),l=function(t){var e=1==t,r=2==t,o=3==t,l=4==t,f=6==t,h=7==t,p=5==t||f;return function(d,y,v,g){for(var m,b,w=s(d),x=i(w),O=n(y,v),S=a(x),E=0,C=g||c,T=e?C(d,S):r||h?C(d,0):void 0;S>E;E++)if((p||E in x)&&(b=O(m=x[E],E,w),t))if(e)T[E]=b;else if(b)switch(t){case 3:return!0;case 5:return m;case 6:return E;case 2:u(T,m)}else switch(t){case 4:return!1;case 7:u(T,m)}return f?-1:o||l?l:T}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},1194:(t,e,r)=>{var n=r(7293),o=r(5112),i=r(7392),s=o("species");t.exports=function(t){return i>=51||!n((function(){var e=[];return(e.constructor={})[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},9341:(t,e,r)=>{"use strict";var n=r(7293);t.exports=function(t,e){var r=[][t];return!!r&&n((function(){r.call(null,e||function(){return 1},1)}))}},1589:(t,e,r)=>{var n=r(1400),o=r(6244),i=r(6135),s=Array,a=Math.max;t.exports=function(t,e,r){for(var c=o(t),u=n(e,c),l=n(void 0===r?c:r,c),f=s(a(l-u,0)),h=0;u<l;u++,h++)i(f,h,t[u]);return f.length=h,f}},206:(t,e,r)=>{var n=r(1702);t.exports=n([].slice)},7475:(t,e,r)=>{var n=r(3157),o=r(4411),i=r(111),s=r(5112)("species"),a=Array;t.exports=function(t){var e;return n(t)&&(e=t.constructor,(o(e)&&(e===a||n(e.prototype))||i(e)&&null===(e=e[s]))&&(e=void 0)),void 0===e?a:e}},5417:(t,e,r)=>{var n=r(7475);t.exports=function(t,e){return new(n(t))(0===e?0:e)}},3411:(t,e,r)=>{var n=r(9670),o=r(9212);t.exports=function(t,e,r,i){try{return i?e(n(r)[0],r[1]):e(r)}catch(e){o(t,"throw",e)}}},7072:(t,e,r)=>{var n=r(5112)("iterator"),o=!1;try{var i=0,s={next:function(){return{done:!!i++}},return:function(){o=!0}};s[n]=function(){return this},Array.from(s,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var r=!1;try{var i={};i[n]=function(){return{next:function(){return{done:r=!0}}}},t(i)}catch(t){}return r}},4326:(t,e,r)=>{var n=r(1702),o=n({}.toString),i=n("".slice);t.exports=function(t){return i(o(t),8,-1)}},648:(t,e,r)=>{var n=r(1694),o=r(614),i=r(4326),s=r(5112)("toStringTag"),a=Object,c="Arguments"==i(function(){return arguments}());t.exports=n?i:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=a(t),s))?r:c?i(e):"Object"==(n=i(e))&&o(e.callee)?"Arguments":n}},5631:(t,e,r)=>{"use strict";var n=r(3070).f,o=r(30),i=r(9190),s=r(9974),a=r(5787),c=r(8554),u=r(408),l=r(1656),f=r(6340),h=r(9781),p=r(2423).fastKey,d=r(9909),y=d.set,v=d.getterFor;t.exports={getConstructor:function(t,e,r,l){var f=t((function(t,n){a(t,d),y(t,{type:e,index:o(null),first:void 0,last:void 0,size:0}),h||(t.size=0),c(n)||u(n,t[l],{that:t,AS_ENTRIES:r})})),d=f.prototype,g=v(e),m=function(t,e,r){var n,o,i=g(t),s=b(t,e);return s?s.value=r:(i.last=s={index:o=p(e,!0),key:e,value:r,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=s),n&&(n.next=s),h?i.size++:t.size++,"F"!==o&&(i.index[o]=s)),t},b=function(t,e){var r,n=g(t),o=p(e);if("F"!==o)return n.index[o];for(r=n.first;r;r=r.next)if(r.key==e)return r};return i(d,{clear:function(){for(var t=g(this),e=t.index,r=t.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete e[r.index],r=r.next;t.first=t.last=void 0,h?t.size=0:this.size=0},delete:function(t){var e=this,r=g(e),n=b(e,t);if(n){var o=n.next,i=n.previous;delete r.index[n.index],n.removed=!0,i&&(i.next=o),o&&(o.previous=i),r.first==n&&(r.first=o),r.last==n&&(r.last=i),h?r.size--:e.size--}return!!n},forEach:function(t){for(var e,r=g(this),n=s(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:r.first;)for(n(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!b(this,t)}}),i(d,r?{get:function(t){var e=b(this,t);return e&&e.value},set:function(t,e){return m(this,0===t?0:t,e)}}:{add:function(t){return m(this,t=0===t?0:t,t)}}),h&&n(d,"size",{get:function(){return g(this).size}}),f},setStrong:function(t,e,r){var n=e+" Iterator",o=v(e),i=v(n);l(t,e,(function(t,e){y(this,{type:n,target:t,state:o(t),kind:e,last:void 0})}),(function(){for(var t=i(this),e=t.kind,r=t.last;r&&r.removed;)r=r.previous;return t.target&&(t.last=r=r?r.next:t.state.first)?"keys"==e?{value:r.key,done:!1}:"values"==e?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),f(e)}}},7710:(t,e,r)=>{"use strict";var n=r(2109),o=r(7854),i=r(1702),s=r(4705),a=r(8052),c=r(2423),u=r(408),l=r(5787),f=r(614),h=r(8554),p=r(111),d=r(7293),y=r(7072),v=r(8003),g=r(9587);t.exports=function(t,e,r){var m=-1!==t.indexOf("Map"),b=-1!==t.indexOf("Weak"),w=m?"set":"add",x=o[t],O=x&&x.prototype,S=x,E={},C=function(t){var e=i(O[t]);a(O,t,"add"==t?function(t){return e(this,0===t?0:t),this}:"delete"==t?function(t){return!(b&&!p(t))&&e(this,0===t?0:t)}:"get"==t?function(t){return b&&!p(t)?void 0:e(this,0===t?0:t)}:"has"==t?function(t){return!(b&&!p(t))&&e(this,0===t?0:t)}:function(t,r){return e(this,0===t?0:t,r),this})};if(s(t,!f(x)||!(b||O.forEach&&!d((function(){(new x).entries().next()})))))S=r.getConstructor(e,t,m,w),c.enable();else if(s(t,!0)){var T=new S,k=T[w](b?{}:-0,1)!=T,A=d((function(){T.has(1)})),R=y((function(t){new x(t)})),I=!b&&d((function(){for(var t=new x,e=5;e--;)t[w](e,e);return!t.has(-0)}));R||((S=e((function(t,e){l(t,O);var r=g(new x,t,S);return h(e)||u(e,r[w],{that:r,AS_ENTRIES:m}),r}))).prototype=O,O.constructor=S),(A||I)&&(C("delete"),C("has"),m&&C("get")),(I||k)&&C(w),b&&O.clear&&delete O.clear}return E[t]=S,n({global:!0,constructor:!0,forced:S!=x},E),v(S,t),b||r.setStrong(S,t,m),S}},9920:(t,e,r)=>{var n=r(2597),o=r(3887),i=r(1236),s=r(3070);t.exports=function(t,e,r){for(var a=o(e),c=s.f,u=i.f,l=0;l<a.length;l++){var f=a[l];n(t,f)||r&&n(r,f)||c(t,f,u(e,f))}}},4964:(t,e,r)=>{var n=r(5112)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[n]=!1,"/./"[t](e)}catch(t){}}return!1}},8544:(t,e,r)=>{var n=r(7293);t.exports=!n((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},8880:(t,e,r)=>{var n=r(9781),o=r(3070),i=r(9114);t.exports=n?function(t,e,r){return o.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},9114:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},6135:(t,e,r)=>{"use strict";var n=r(4948),o=r(3070),i=r(9114);t.exports=function(t,e,r){var s=n(e);s in t?o.f(t,s,i(0,r)):t[s]=r}},7045:(t,e,r)=>{var n=r(6339),o=r(3070);t.exports=function(t,e,r){return r.get&&n(r.get,e,{getter:!0}),r.set&&n(r.set,e,{setter:!0}),o.f(t,e,r)}},8052:(t,e,r)=>{var n=r(614),o=r(3070),i=r(6339),s=r(3072);t.exports=function(t,e,r,a){a||(a={});var c=a.enumerable,u=void 0!==a.name?a.name:e;if(n(r)&&i(r,u,a),a.global)c?t[e]=r:s(e,r);else{try{a.unsafe?t[e]&&(c=!0):delete t[e]}catch(t){}c?t[e]=r:o.f(t,e,{value:r,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},9190:(t,e,r)=>{var n=r(8052);t.exports=function(t,e,r){for(var o in e)n(t,o,e[o],r);return t}},3072:(t,e,r)=>{var n=r(7854),o=Object.defineProperty;t.exports=function(t,e){try{o(n,t,{value:e,configurable:!0,writable:!0})}catch(r){n[t]=e}return e}},9781:(t,e,r)=>{var n=r(7293);t.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},317:(t,e,r)=>{var n=r(7854),o=r(111),i=n.document,s=o(i)&&o(i.createElement);t.exports=function(t){return s?i.createElement(t):{}}},7207:t=>{var e=TypeError;t.exports=function(t){if(t>9007199254740991)throw e("Maximum allowed index exceeded");return t}},8324:t=>{t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:(t,e,r)=>{var n=r(317)("span").classList,o=n&&n.constructor&&n.constructor.prototype;t.exports=o===Object.prototype?void 0:o},8113:(t,e,r)=>{var n=r(5005);t.exports=n("navigator","userAgent")||""},7392:(t,e,r)=>{var n,o,i=r(7854),s=r(8113),a=i.process,c=i.Deno,u=a&&a.versions||c&&c.version,l=u&&u.v8;l&&(o=(n=l.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!o&&s&&(!(n=s.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=s.match(/Chrome\/(\d+)/))&&(o=+n[1]),t.exports=o},748:t=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:(t,e,r)=>{var n=r(7854),o=r(1236).f,i=r(8880),s=r(8052),a=r(3072),c=r(9920),u=r(4705);t.exports=function(t,e){var r,l,f,h,p,d=t.target,y=t.global,v=t.stat;if(r=y?n:v?n[d]||a(d,{}):(n[d]||{}).prototype)for(l in e){if(h=e[l],f=t.dontCallGetSet?(p=o(r,l))&&p.value:r[l],!u(y?l:d+(v?".":"#")+l,t.forced)&&void 0!==f){if(typeof h==typeof f)continue;c(h,f)}(t.sham||f&&f.sham)&&i(h,"sham",!0),s(r,l,h,t)}}},7293:t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},6677:(t,e,r)=>{var n=r(7293);t.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},2104:(t,e,r)=>{var n=r(4374),o=Function.prototype,i=o.apply,s=o.call;t.exports="object"==typeof Reflect&&Reflect.apply||(n?s.bind(i):function(){return s.apply(i,arguments)})},9974:(t,e,r)=>{var n=r(1702),o=r(9662),i=r(4374),s=n(n.bind);t.exports=function(t,e){return o(t),void 0===e?t:i?s(t,e):function(){return t.apply(e,arguments)}}},4374:(t,e,r)=>{var n=r(7293);t.exports=!n((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},7065:(t,e,r)=>{"use strict";var n=r(1702),o=r(9662),i=r(111),s=r(2597),a=r(206),c=r(4374),u=Function,l=n([].concat),f=n([].join),h={},p=function(t,e,r){if(!s(h,e)){for(var n=[],o=0;o<e;o++)n[o]="a["+o+"]";h[e]=u("C,a","return new C("+f(n,",")+")")}return h[e](t,r)};t.exports=c?u.bind:function(t){var e=o(this),r=e.prototype,n=a(arguments,1),s=function(){var r=l(n,a(arguments));return this instanceof s?p(e,r.length,r):e.apply(t,r)};return i(r)&&(s.prototype=r),s}},6916:(t,e,r)=>{var n=r(4374),o=Function.prototype.call;t.exports=n?o.bind(o):function(){return o.apply(o,arguments)}},6530:(t,e,r)=>{var n=r(9781),o=r(2597),i=Function.prototype,s=n&&Object.getOwnPropertyDescriptor,a=o(i,"name"),c=a&&"something"===function(){}.name,u=a&&(!n||n&&s(i,"name").configurable);t.exports={EXISTS:a,PROPER:c,CONFIGURABLE:u}},1702:(t,e,r)=>{var n=r(4374),o=Function.prototype,i=o.bind,s=o.call,a=n&&i.bind(s,s);t.exports=n?function(t){return t&&a(t)}:function(t){return t&&function(){return s.apply(t,arguments)}}},5005:(t,e,r)=>{var n=r(7854),o=r(614),i=function(t){return o(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?i(n[t]):n[t]&&n[t][e]}},1246:(t,e,r)=>{var n=r(648),o=r(8173),i=r(8554),s=r(7497),a=r(5112)("iterator");t.exports=function(t){if(!i(t))return o(t,a)||o(t,"@@iterator")||s[n(t)]}},4121:(t,e,r)=>{var n=r(6916),o=r(9662),i=r(9670),s=r(6330),a=r(1246),c=TypeError;t.exports=function(t,e){var r=arguments.length<2?a(t):e;if(o(r))return i(n(r,t));throw c(s(t)+" is not iterable")}},8173:(t,e,r)=>{var n=r(9662),o=r(8554);t.exports=function(t,e){var r=t[e];return o(r)?void 0:n(r)}},7854:(t,e,r)=>{var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||Function("return this")()},2597:(t,e,r)=>{var n=r(1702),o=r(7908),i=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return i(o(t),e)}},3501:t=>{t.exports={}},490:(t,e,r)=>{var n=r(5005);t.exports=n("document","documentElement")},4664:(t,e,r)=>{var n=r(9781),o=r(7293),i=r(317);t.exports=!n&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},8361:(t,e,r)=>{var n=r(1702),o=r(7293),i=r(4326),s=Object,a=n("".split);t.exports=o((function(){return!s("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?a(t,""):s(t)}:s},9587:(t,e,r)=>{var n=r(614),o=r(111),i=r(7674);t.exports=function(t,e,r){var s,a;return i&&n(s=e.constructor)&&s!==r&&o(a=s.prototype)&&a!==r.prototype&&i(t,a),t}},2788:(t,e,r)=>{var n=r(1702),o=r(614),i=r(5465),s=n(Function.toString);o(i.inspectSource)||(i.inspectSource=function(t){return s(t)}),t.exports=i.inspectSource},2423:(t,e,r)=>{var n=r(2109),o=r(1702),i=r(3501),s=r(111),a=r(2597),c=r(3070).f,u=r(8006),l=r(1156),f=r(2050),h=r(9711),p=r(6677),d=!1,y=h("meta"),v=0,g=function(t){c(t,y,{value:{objectID:"O"+v++,weakData:{}}})},m=t.exports={enable:function(){m.enable=function(){},d=!0;var t=u.f,e=o([].splice),r={};r[y]=1,t(r).length&&(u.f=function(r){for(var n=t(r),o=0,i=n.length;o<i;o++)if(n[o]===y){e(n,o,1);break}return n},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:l.f}))},fastKey:function(t,e){if(!s(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,y)){if(!f(t))return"F";if(!e)return"E";g(t)}return t[y].objectID},getWeakData:function(t,e){if(!a(t,y)){if(!f(t))return!0;if(!e)return!1;g(t)}return t[y].weakData},onFreeze:function(t){return p&&d&&f(t)&&!a(t,y)&&g(t),t}};i[y]=!0},9909:(t,e,r)=>{var n,o,i,s=r(4811),a=r(7854),c=r(1702),u=r(111),l=r(8880),f=r(2597),h=r(5465),p=r(6200),d=r(3501),y="Object already initialized",v=a.TypeError,g=a.WeakMap;if(s||h.state){var m=h.state||(h.state=new g),b=c(m.get),w=c(m.has),x=c(m.set);n=function(t,e){if(w(m,t))throw v(y);return e.facade=t,x(m,t,e),e},o=function(t){return b(m,t)||{}},i=function(t){return w(m,t)}}else{var O=p("state");d[O]=!0,n=function(t,e){if(f(t,O))throw v(y);return e.facade=t,l(t,O,e),e},o=function(t){return f(t,O)?t[O]:{}},i=function(t){return f(t,O)}}t.exports={set:n,get:o,has:i,enforce:function(t){return i(t)?o(t):n(t,{})},getterFor:function(t){return function(e){var r;if(!u(e)||(r=o(e)).type!==t)throw v("Incompatible receiver, "+t+" required");return r}}}},7659:(t,e,r)=>{var n=r(5112),o=r(7497),i=n("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||s[i]===t)}},3157:(t,e,r)=>{var n=r(4326);t.exports=Array.isArray||function(t){return"Array"==n(t)}},614:t=>{t.exports=function(t){return"function"==typeof t}},4411:(t,e,r)=>{var n=r(1702),o=r(7293),i=r(614),s=r(648),a=r(5005),c=r(2788),u=function(){},l=[],f=a("Reflect","construct"),h=/^\s*(?:class|function)\b/,p=n(h.exec),d=!h.exec(u),y=function(t){if(!i(t))return!1;try{return f(u,l,t),!0}catch(t){return!1}},v=function(t){if(!i(t))return!1;switch(s(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!p(h,c(t))}catch(t){return!0}};v.sham=!0,t.exports=!f||o((function(){var t;return y(y.call)||!y(Object)||!y((function(){t=!0}))||t}))?v:y},5032:(t,e,r)=>{var n=r(2597);t.exports=function(t){return void 0!==t&&(n(t,"value")||n(t,"writable"))}},4705:(t,e,r)=>{var n=r(7293),o=r(614),i=/#|\.prototype\./,s=function(t,e){var r=c[a(t)];return r==l||r!=u&&(o(e)?n(e):!!e)},a=s.normalize=function(t){return String(t).replace(i,".").toLowerCase()},c=s.data={},u=s.NATIVE="N",l=s.POLYFILL="P";t.exports=s},8554:t=>{t.exports=function(t){return null==t}},111:(t,e,r)=>{var n=r(614),o="object"==typeof document&&document.all,i=void 0===o&&void 0!==o;t.exports=i?function(t){return"object"==typeof t?null!==t:n(t)||t===o}:function(t){return"object"==typeof t?null!==t:n(t)}},1913:t=>{t.exports=!1},7850:(t,e,r)=>{var n=r(111),o=r(4326),i=r(5112)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==o(t))}},2190:(t,e,r)=>{var n=r(5005),o=r(614),i=r(7976),s=r(3307),a=Object;t.exports=s?function(t){return"symbol"==typeof t}:function(t){var e=n("Symbol");return o(e)&&i(e.prototype,a(t))}},408:(t,e,r)=>{var n=r(9974),o=r(6916),i=r(9670),s=r(6330),a=r(7659),c=r(6244),u=r(7976),l=r(4121),f=r(1246),h=r(9212),p=TypeError,d=function(t,e){this.stopped=t,this.result=e},y=d.prototype;t.exports=function(t,e,r){var v,g,m,b,w,x,O,S=r&&r.that,E=!(!r||!r.AS_ENTRIES),C=!(!r||!r.IS_RECORD),T=!(!r||!r.IS_ITERATOR),k=!(!r||!r.INTERRUPTED),A=n(e,S),R=function(t){return v&&h(v,"normal",t),new d(!0,t)},I=function(t){return E?(i(t),k?A(t[0],t[1],R):A(t[0],t[1])):k?A(t,R):A(t)};if(C)v=t.iterator;else if(T)v=t;else{if(!(g=f(t)))throw p(s(t)+" is not iterable");if(a(g)){for(m=0,b=c(t);b>m;m++)if((w=I(t[m]))&&u(y,w))return w;return new d(!1)}v=l(t,g)}for(x=C?t.next:v.next;!(O=o(x,v)).done;){try{w=I(O.value)}catch(t){h(v,"throw",t)}if("object"==typeof w&&w&&u(y,w))return w}return new d(!1)}},9212:(t,e,r)=>{var n=r(6916),o=r(9670),i=r(8173);t.exports=function(t,e,r){var s,a;o(t);try{if(!(s=i(t,"return"))){if("throw"===e)throw r;return r}s=n(s,t)}catch(t){a=!0,s=t}if("throw"===e)throw r;if(a)throw s;return o(s),r}},3061:(t,e,r)=>{"use strict";var n=r(3383).IteratorPrototype,o=r(30),i=r(9114),s=r(8003),a=r(7497),c=function(){return this};t.exports=function(t,e,r,u){var l=e+" Iterator";return t.prototype=o(n,{next:i(+!u,r)}),s(t,l,!1,!0),a[l]=c,t}},1656:(t,e,r)=>{"use strict";var n=r(2109),o=r(6916),i=r(1913),s=r(6530),a=r(614),c=r(3061),u=r(9518),l=r(7674),f=r(8003),h=r(8880),p=r(8052),d=r(5112),y=r(7497),v=r(3383),g=s.PROPER,m=s.CONFIGURABLE,b=v.IteratorPrototype,w=v.BUGGY_SAFARI_ITERATORS,x=d("iterator"),O="keys",S="values",E="entries",C=function(){return this};t.exports=function(t,e,r,s,d,v,T){c(r,e,s);var k,A,R,I=function(t){if(t===d&&B)return B;if(!w&&t in P)return P[t];switch(t){case O:case S:case E:return function(){return new r(this,t)}}return function(){return new r(this)}},_=e+" Iterator",j=!1,P=t.prototype,L=P[x]||P["@@iterator"]||d&&P[d],B=!w&&L||I(d),D="Array"==e&&P.entries||L;if(D&&(k=u(D.call(new t)))!==Object.prototype&&k.next&&(i||u(k)===b||(l?l(k,b):a(k[x])||p(k,x,C)),f(k,_,!0,!0),i&&(y[_]=C)),g&&d==S&&L&&L.name!==S&&(!i&&m?h(P,"name",S):(j=!0,B=function(){return o(L,this)})),d)if(A={values:I(S),keys:v?B:I(O),entries:I(E)},T)for(R in A)(w||j||!(R in P))&&p(P,R,A[R]);else n({target:e,proto:!0,forced:w||j},A);return i&&!T||P[x]===B||p(P,x,B,{name:d}),y[e]=B,A}},3383:(t,e,r)=>{"use strict";var n,o,i,s=r(7293),a=r(614),c=r(111),u=r(30),l=r(9518),f=r(8052),h=r(5112),p=r(1913),d=h("iterator"),y=!1;[].keys&&("next"in(i=[].keys())?(o=l(l(i)))!==Object.prototype&&(n=o):y=!0),!c(n)||s((function(){var t={};return n[d].call(t)!==t}))?n={}:p&&(n=u(n)),a(n[d])||f(n,d,(function(){return this})),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:y}},7497:t=>{t.exports={}},6244:(t,e,r)=>{var n=r(7466);t.exports=function(t){return n(t.length)}},6339:(t,e,r)=>{var n=r(7293),o=r(614),i=r(2597),s=r(9781),a=r(6530).CONFIGURABLE,c=r(2788),u=r(9909),l=u.enforce,f=u.get,h=Object.defineProperty,p=s&&!n((function(){return 8!==h((function(){}),"length",{value:8}).length})),d=String(String).split("String"),y=t.exports=function(t,e,r){"Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!i(t,"name")||a&&t.name!==e)&&(s?h(t,"name",{value:e,configurable:!0}):t.name=e),p&&r&&i(r,"arity")&&t.length!==r.arity&&h(t,"length",{value:r.arity});try{r&&i(r,"constructor")&&r.constructor?s&&h(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var n=l(t);return i(n,"source")||(n.source=d.join("string"==typeof e?e:"")),t};Function.prototype.toString=y((function(){return o(this)&&f(this).source||c(this)}),"toString")},4758:t=>{var e=Math.ceil,r=Math.floor;t.exports=Math.trunc||function(t){var n=+t;return(n>0?r:e)(n)}},3929:(t,e,r)=>{var n=r(7850),o=TypeError;t.exports=function(t){if(n(t))throw o("The method doesn't accept regular expressions");return t}},3009:(t,e,r)=>{var n=r(7854),o=r(7293),i=r(1702),s=r(1340),a=r(3111).trim,c=r(1361),u=n.parseInt,l=n.Symbol,f=l&&l.iterator,h=/^[+-]?0x/i,p=i(h.exec),d=8!==u(c+"08")||22!==u(c+"0x16")||f&&!o((function(){u(Object(f))}));t.exports=d?function(t,e){var r=a(s(t));return u(r,e>>>0||(p(h,r)?16:10))}:u},30:(t,e,r)=>{var n,o=r(9670),i=r(6048),s=r(748),a=r(3501),c=r(490),u=r(317),l=r(6200),f=l("IE_PROTO"),h=function(){},p=function(t){return"<script>"+t+"</"+"script>"},d=function(t){t.write(p("")),t.close();var e=t.parentWindow.Object;return t=null,e},y=function(){try{n=new ActiveXObject("htmlfile")}catch(t){}var t,e;y="undefined"!=typeof document?document.domain&&n?d(n):((e=u("iframe")).style.display="none",c.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(p("document.F=Object")),t.close(),t.F):d(n);for(var r=s.length;r--;)delete y.prototype[s[r]];return y()};a[f]=!0,t.exports=Object.create||function(t,e){var r;return null!==t?(h.prototype=o(t),r=new h,h.prototype=null,r[f]=t):r=y(),void 0===e?r:i.f(r,e)}},6048:(t,e,r)=>{var n=r(9781),o=r(3353),i=r(3070),s=r(9670),a=r(5656),c=r(1956);e.f=n&&!o?Object.defineProperties:function(t,e){s(t);for(var r,n=a(e),o=c(e),u=o.length,l=0;u>l;)i.f(t,r=o[l++],n[r]);return t}},3070:(t,e,r)=>{var n=r(9781),o=r(4664),i=r(3353),s=r(9670),a=r(4948),c=TypeError,u=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f="enumerable",h="configurable",p="writable";e.f=n?i?function(t,e,r){if(s(t),e=a(e),s(r),"function"==typeof t&&"prototype"===e&&"value"in r&&p in r&&!r.writable){var n=l(t,e);n&&n.writable&&(t[e]=r.value,r={configurable:h in r?r.configurable:n.configurable,enumerable:f in r?r.enumerable:n.enumerable,writable:!1})}return u(t,e,r)}:u:function(t,e,r){if(s(t),e=a(e),s(r),o)try{return u(t,e,r)}catch(t){}if("get"in r||"set"in r)throw c("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},1236:(t,e,r)=>{var n=r(9781),o=r(6916),i=r(5296),s=r(9114),a=r(5656),c=r(4948),u=r(2597),l=r(4664),f=Object.getOwnPropertyDescriptor;e.f=n?f:function(t,e){if(t=a(t),e=c(e),l)try{return f(t,e)}catch(t){}if(u(t,e))return s(!o(i.f,t,e),t[e])}},1156:(t,e,r)=>{var n=r(4326),o=r(5656),i=r(8006).f,s=r(1589),a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"Window"==n(t)?function(t){try{return i(t)}catch(t){return s(a)}}(t):i(o(t))}},8006:(t,e,r)=>{var n=r(6324),o=r(748).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,o)}},5181:(t,e)=>{e.f=Object.getOwnPropertySymbols},9518:(t,e,r)=>{var n=r(2597),o=r(614),i=r(7908),s=r(6200),a=r(8544),c=s("IE_PROTO"),u=Object,l=u.prototype;t.exports=a?u.getPrototypeOf:function(t){var e=i(t);if(n(e,c))return e[c];var r=e.constructor;return o(r)&&e instanceof r?r.prototype:e instanceof u?l:null}},2050:(t,e,r)=>{var n=r(7293),o=r(111),i=r(4326),s=r(7556),a=Object.isExtensible,c=n((function(){a(1)}));t.exports=c||s?function(t){return!!o(t)&&((!s||"ArrayBuffer"!=i(t))&&(!a||a(t)))}:a},7976:(t,e,r)=>{var n=r(1702);t.exports=n({}.isPrototypeOf)},6324:(t,e,r)=>{var n=r(1702),o=r(2597),i=r(5656),s=r(1318).indexOf,a=r(3501),c=n([].push);t.exports=function(t,e){var r,n=i(t),u=0,l=[];for(r in n)!o(a,r)&&o(n,r)&&c(l,r);for(;e.length>u;)o(n,r=e[u++])&&(~s(l,r)||c(l,r));return l}},1956:(t,e,r)=>{var n=r(6324),o=r(748);t.exports=Object.keys||function(t){return n(t,o)}},5296:(t,e)=>{"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,o=n&&!r.call({1:2},1);e.f=o?function(t){var e=n(this,t);return!!e&&e.enumerable}:r},7674:(t,e,r)=>{var n=r(1702),o=r(9670),i=r(6077);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=n(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return o(r),i(n),e?t(r,n):r.__proto__=n,r}}():void 0)},4699:(t,e,r)=>{var n=r(9781),o=r(1702),i=r(1956),s=r(5656),a=o(r(5296).f),c=o([].push),u=function(t){return function(e){for(var r,o=s(e),u=i(o),l=u.length,f=0,h=[];l>f;)r=u[f++],n&&!a(o,r)||c(h,t?[r,o[r]]:o[r]);return h}};t.exports={entries:u(!0),values:u(!1)}},288:(t,e,r)=>{"use strict";var n=r(1694),o=r(648);t.exports=n?{}.toString:function(){return"[object "+o(this)+"]"}},2140:(t,e,r)=>{var n=r(6916),o=r(614),i=r(111),s=TypeError;t.exports=function(t,e){var r,a;if("string"===e&&o(r=t.toString)&&!i(a=n(r,t)))return a;if(o(r=t.valueOf)&&!i(a=n(r,t)))return a;if("string"!==e&&o(r=t.toString)&&!i(a=n(r,t)))return a;throw s("Can't convert object to primitive value")}},3887:(t,e,r)=>{var n=r(5005),o=r(1702),i=r(8006),s=r(5181),a=r(9670),c=o([].concat);t.exports=n("Reflect","ownKeys")||function(t){var e=i.f(a(t)),r=s.f;return r?c(e,r(t)):e}},857:(t,e,r)=>{var n=r(7854);t.exports=n},2261:(t,e,r)=>{"use strict";var n,o,i=r(6916),s=r(1702),a=r(1340),c=r(7066),u=r(2999),l=r(2309),f=r(30),h=r(9909).get,p=r(9441),d=r(7168),y=l("native-string-replace",String.prototype.replace),v=RegExp.prototype.exec,g=v,m=s("".charAt),b=s("".indexOf),w=s("".replace),x=s("".slice),O=(o=/b*/g,i(v,n=/a/,"a"),i(v,o,"a"),0!==n.lastIndex||0!==o.lastIndex),S=u.BROKEN_CARET,E=void 0!==/()??/.exec("")[1];(O||E||S||p||d)&&(g=function(t){var e,r,n,o,s,u,l,p=this,d=h(p),C=a(t),T=d.raw;if(T)return T.lastIndex=p.lastIndex,e=i(g,T,C),p.lastIndex=T.lastIndex,e;var k=d.groups,A=S&&p.sticky,R=i(c,p),I=p.source,_=0,j=C;if(A&&(R=w(R,"y",""),-1===b(R,"g")&&(R+="g"),j=x(C,p.lastIndex),p.lastIndex>0&&(!p.multiline||p.multiline&&"\n"!==m(C,p.lastIndex-1))&&(I="(?: "+I+")",j=" "+j,_++),r=new RegExp("^(?:"+I+")",R)),E&&(r=new RegExp("^"+I+"$(?!\\s)",R)),O&&(n=p.lastIndex),o=i(v,A?r:p,j),A?o?(o.input=x(o.input,_),o[0]=x(o[0],_),o.index=p.lastIndex,p.lastIndex+=o[0].length):p.lastIndex=0:O&&o&&(p.lastIndex=p.global?o.index+o[0].length:n),E&&o&&o.length>1&&i(y,o[0],r,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(o[s]=void 0)})),o&&k)for(o.groups=u=f(null),s=0;s<k.length;s++)u[(l=k[s])[0]]=o[l[1]];return o}),t.exports=g},7066:(t,e,r)=>{"use strict";var n=r(9670);t.exports=function(){var t=n(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},4706:(t,e,r)=>{var n=r(6916),o=r(2597),i=r(7976),s=r(7066),a=RegExp.prototype;t.exports=function(t){var e=t.flags;return void 0!==e||"flags"in a||o(t,"flags")||!i(a,t)?e:n(s,t)}},2999:(t,e,r)=>{var n=r(7293),o=r(7854).RegExp,i=n((function(){var t=o("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),s=i||n((function(){return!o("a","y").sticky})),a=i||n((function(){var t=o("^r","gy");return t.lastIndex=2,null!=t.exec("str")}));t.exports={BROKEN_CARET:a,MISSED_STICKY:s,UNSUPPORTED_Y:i}},9441:(t,e,r)=>{var n=r(7293),o=r(7854).RegExp;t.exports=n((function(){var t=o(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)}))},7168:(t,e,r)=>{var n=r(7293),o=r(7854).RegExp;t.exports=n((function(){var t=o("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},4488:(t,e,r)=>{var n=r(8554),o=TypeError;t.exports=function(t){if(n(t))throw o("Can't call method on "+t);return t}},7152:(t,e,r)=>{var n=r(7854),o=r(2104),i=r(614),s=r(8113),a=r(206),c=r(8053),u=/MSIE .\./.test(s),l=n.Function,f=function(t){return u?function(e,r){var n=c(arguments.length,1)>2,s=i(e)?e:l(e),u=n?a(arguments,2):void 0;return t(n?function(){o(s,this,u)}:s,r)}:t};t.exports={setTimeout:f(n.setTimeout),setInterval:f(n.setInterval)}},6340:(t,e,r)=>{"use strict";var n=r(5005),o=r(3070),i=r(5112),s=r(9781),a=i("species");t.exports=function(t){var e=n(t),r=o.f;s&&e&&!e[a]&&r(e,a,{configurable:!0,get:function(){return this}})}},8003:(t,e,r)=>{var n=r(3070).f,o=r(2597),i=r(5112)("toStringTag");t.exports=function(t,e,r){t&&!r&&(t=t.prototype),t&&!o(t,i)&&n(t,i,{configurable:!0,value:e})}},6200:(t,e,r)=>{var n=r(2309),o=r(9711),i=n("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},5465:(t,e,r)=>{var n=r(7854),o=r(3072),i="__core-js_shared__",s=n[i]||o(i,{});t.exports=s},2309:(t,e,r)=>{var n=r(1913),o=r(5465);(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.25.0",mode:n?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.0/LICENSE",source:"https://github.com/zloirock/core-js"})},8710:(t,e,r)=>{var n=r(1702),o=r(9303),i=r(1340),s=r(4488),a=n("".charAt),c=n("".charCodeAt),u=n("".slice),l=function(t){return function(e,r){var n,l,f=i(s(e)),h=o(r),p=f.length;return h<0||h>=p?t?"":void 0:(n=c(f,h))<55296||n>56319||h+1===p||(l=c(f,h+1))<56320||l>57343?t?a(f,h):n:t?u(f,h,h+2):l-56320+(n-55296<<10)+65536}};t.exports={codeAt:l(!1),charAt:l(!0)}},3111:(t,e,r)=>{var n=r(1702),o=r(4488),i=r(1340),s=r(1361),a=n("".replace),c="["+s+"]",u=RegExp("^"+c+c+"*"),l=RegExp(c+c+"*$"),f=function(t){return function(e){var r=i(o(e));return 1&t&&(r=a(r,u,"")),2&t&&(r=a(r,l,"")),r}};t.exports={start:f(1),end:f(2),trim:f(3)}},6293:(t,e,r)=>{var n=r(7392),o=r(7293);t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},6532:(t,e,r)=>{var n=r(6916),o=r(5005),i=r(5112),s=r(8052);t.exports=function(){var t=o("Symbol"),e=t&&t.prototype,r=e&&e.valueOf,a=i("toPrimitive");e&&!e[a]&&s(e,a,(function(t){return n(r,this)}),{arity:1})}},2015:(t,e,r)=>{var n=r(6293);t.exports=n&&!!Symbol.for&&!!Symbol.keyFor},1400:(t,e,r)=>{var n=r(9303),o=Math.max,i=Math.min;t.exports=function(t,e){var r=n(t);return r<0?o(r+e,0):i(r,e)}},5656:(t,e,r)=>{var n=r(8361),o=r(4488);t.exports=function(t){return n(o(t))}},9303:(t,e,r)=>{var n=r(4758);t.exports=function(t){var e=+t;return e!=e||0===e?0:n(e)}},7466:(t,e,r)=>{var n=r(9303),o=Math.min;t.exports=function(t){return t>0?o(n(t),9007199254740991):0}},7908:(t,e,r)=>{var n=r(4488),o=Object;t.exports=function(t){return o(n(t))}},7593:(t,e,r)=>{var n=r(6916),o=r(111),i=r(2190),s=r(8173),a=r(2140),c=r(5112),u=TypeError,l=c("toPrimitive");t.exports=function(t,e){if(!o(t)||i(t))return t;var r,c=s(t,l);if(c){if(void 0===e&&(e="default"),r=n(c,t,e),!o(r)||i(r))return r;throw u("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},4948:(t,e,r)=>{var n=r(7593),o=r(2190);t.exports=function(t){var e=n(t,"string");return o(e)?e:e+""}},1694:(t,e,r)=>{var n={};n[r(5112)("toStringTag")]="z",t.exports="[object z]"===String(n)},1340:(t,e,r)=>{var n=r(648),o=String;t.exports=function(t){if("Symbol"===n(t))throw TypeError("Cannot convert a Symbol value to a string");return o(t)}},6330:t=>{var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},9711:(t,e,r)=>{var n=r(1702),o=0,i=Math.random(),s=n(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+s(++o+i,36)}},3307:(t,e,r)=>{var n=r(6293);t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:(t,e,r)=>{var n=r(9781),o=r(7293);t.exports=n&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},8053:t=>{var e=TypeError;t.exports=function(t,r){if(t<r)throw e("Not enough arguments");return t}},4811:(t,e,r)=>{var n=r(7854),o=r(614),i=n.WeakMap;t.exports=o(i)&&/native code/.test(String(i))},6800:(t,e,r)=>{var n=r(857),o=r(2597),i=r(6061),s=r(3070).f;t.exports=function(t){var e=n.Symbol||(n.Symbol={});o(e,t)||s(e,t,{value:i.f(t)})}},6061:(t,e,r)=>{var n=r(5112);e.f=n},5112:(t,e,r)=>{var n=r(7854),o=r(2309),i=r(2597),s=r(9711),a=r(6293),c=r(3307),u=o("wks"),l=n.Symbol,f=l&&l.for,h=c?l:l&&l.withoutSetter||s;t.exports=function(t){if(!i(u,t)||!a&&"string"!=typeof u[t]){var e="Symbol."+t;a&&i(l,t)?u[t]=l[t]:u[t]=c&&f?f(e):h(e)}return u[t]}},1361:t=>{t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},2222:(t,e,r)=>{"use strict";var n=r(2109),o=r(7293),i=r(3157),s=r(111),a=r(7908),c=r(6244),u=r(7207),l=r(6135),f=r(5417),h=r(1194),p=r(5112),d=r(7392),y=p("isConcatSpreadable"),v=d>=51||!o((function(){var t=[];return t[y]=!1,t.concat()[0]!==t})),g=h("concat"),m=function(t){if(!s(t))return!1;var e=t[y];return void 0!==e?!!e:i(t)};n({target:"Array",proto:!0,arity:1,forced:!v||!g},{concat:function(t){var e,r,n,o,i,s=a(this),h=f(s,0),p=0;for(e=-1,n=arguments.length;e<n;e++)if(m(i=-1===e?s:arguments[e]))for(o=c(i),u(p+o),r=0;r<o;r++,p++)r in i&&l(h,p,i[r]);else u(p+1),l(h,p++,i);return h.length=p,h}})},7327:(t,e,r)=>{"use strict";var n=r(2109),o=r(2092).filter;n({target:"Array",proto:!0,forced:!r(1194)("filter")},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},9554:(t,e,r)=>{"use strict";var n=r(2109),o=r(8533);n({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},1038:(t,e,r)=>{var n=r(2109),o=r(8457);n({target:"Array",stat:!0,forced:!r(7072)((function(t){Array.from(t)}))},{from:o})},6699:(t,e,r)=>{"use strict";var n=r(2109),o=r(1318).includes,i=r(7293),s=r(1223);n({target:"Array",proto:!0,forced:i((function(){return!Array(1).includes()}))},{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),s("includes")},9753:(t,e,r)=>{r(2109)({target:"Array",stat:!0},{isArray:r(3157)})},6992:(t,e,r)=>{"use strict";var n=r(5656),o=r(1223),i=r(7497),s=r(9909),a=r(3070).f,c=r(1656),u=r(1913),l=r(9781),f="Array Iterator",h=s.set,p=s.getterFor(f);t.exports=c(Array,"Array",(function(t,e){h(this,{type:f,target:n(t),index:0,kind:e})}),(function(){var t=p(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}}),"values");var d=i.Arguments=i.Array;if(o("keys"),o("values"),o("entries"),!u&&l&&"values"!==d.name)try{a(d,"name",{value:"values"})}catch(t){}},9600:(t,e,r)=>{"use strict";var n=r(2109),o=r(1702),i=r(8361),s=r(5656),a=r(9341),c=o([].join),u=i!=Object,l=a("join",",");n({target:"Array",proto:!0,forced:u||!l},{join:function(t){return c(s(this),void 0===t?",":t)}})},1249:(t,e,r)=>{"use strict";var n=r(2109),o=r(2092).map;n({target:"Array",proto:!0,forced:!r(1194)("map")},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},7042:(t,e,r)=>{"use strict";var n=r(2109),o=r(3157),i=r(4411),s=r(111),a=r(1400),c=r(6244),u=r(5656),l=r(6135),f=r(5112),h=r(1194),p=r(206),d=h("slice"),y=f("species"),v=Array,g=Math.max;n({target:"Array",proto:!0,forced:!d},{slice:function(t,e){var r,n,f,h=u(this),d=c(h),m=a(t,d),b=a(void 0===e?d:e,d);if(o(h)&&(r=h.constructor,(i(r)&&(r===v||o(r.prototype))||s(r)&&null===(r=r[y]))&&(r=void 0),r===v||void 0===r))return p(h,m,b);for(n=new(void 0===r?v:r)(g(b-m,0)),f=0;m<b;m++,f++)m in h&&l(n,f,h[m]);return n.length=f,n}})},3843:(t,e,r)=>{var n=r(2109),o=r(1702),i=Date,s=o(i.prototype.getTime);n({target:"Date",stat:!0},{now:function(){return s(new i)}})},3710:(t,e,r)=>{var n=r(1702),o=r(8052),i=Date.prototype,s="Invalid Date",a="toString",c=n(i.toString),u=n(i.getTime);String(new Date(NaN))!=s&&o(i,a,(function(){var t=u(this);return t==t?c(this):s}))},4812:(t,e,r)=>{var n=r(2109),o=r(7065);n({target:"Function",proto:!0,forced:Function.bind!==o},{bind:o})},8309:(t,e,r)=>{var n=r(9781),o=r(6530).EXISTS,i=r(1702),s=r(3070).f,a=Function.prototype,c=i(a.toString),u=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,l=i(u.exec);n&&!o&&s(a,"name",{configurable:!0,get:function(){try{return l(u,c(this))[1]}catch(t){return""}}})},8862:(t,e,r)=>{var n=r(2109),o=r(5005),i=r(2104),s=r(6916),a=r(1702),c=r(7293),u=r(3157),l=r(614),f=r(111),h=r(2190),p=r(206),d=r(6293),y=o("JSON","stringify"),v=a(/./.exec),g=a("".charAt),m=a("".charCodeAt),b=a("".replace),w=a(1..toString),x=/[\uD800-\uDFFF]/g,O=/^[\uD800-\uDBFF]$/,S=/^[\uDC00-\uDFFF]$/,E=!d||c((function(){var t=o("Symbol")();return"[null]"!=y([t])||"{}"!=y({a:t})||"{}"!=y(Object(t))})),C=c((function(){return'"\\udf06\\ud834"'!==y("\udf06\ud834")||'"\\udead"'!==y("\udead")})),T=function(t,e){var r=p(arguments),n=e;if((f(e)||void 0!==t)&&!h(t))return u(e)||(e=function(t,e){if(l(n)&&(e=s(n,this,t,e)),!h(e))return e}),r[1]=e,i(y,null,r)},k=function(t,e,r){var n=g(r,e-1),o=g(r,e+1);return v(O,t)&&!v(S,o)||v(S,t)&&!v(O,n)?"\\u"+w(m(t,0),16):t};y&&n({target:"JSON",stat:!0,arity:3,forced:E||C},{stringify:function(t,e,r){var n=p(arguments),o=i(E?T:y,null,n);return C&&"string"==typeof o?b(o,x,k):o}})},9098:(t,e,r)=>{"use strict";r(7710)("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),r(5631))},1532:(t,e,r)=>{r(9098)},3689:(t,e,r)=>{r(2109)({target:"Math",stat:!0},{trunc:r(4758)})},8011:(t,e,r)=>{r(2109)({target:"Object",stat:!0,sham:!r(9781)},{create:r(30)})},9070:(t,e,r)=>{var n=r(2109),o=r(9781),i=r(3070).f;n({target:"Object",stat:!0,forced:Object.defineProperty!==i,sham:!o},{defineProperty:i})},5003:(t,e,r)=>{var n=r(2109),o=r(7293),i=r(5656),s=r(1236).f,a=r(9781),c=o((function(){s(1)}));n({target:"Object",stat:!0,forced:!a||c,sham:!a},{getOwnPropertyDescriptor:function(t,e){return s(i(t),e)}})},9660:(t,e,r)=>{var n=r(2109),o=r(6293),i=r(7293),s=r(5181),a=r(7908);n({target:"Object",stat:!0,forced:!o||i((function(){s.f(1)}))},{getOwnPropertySymbols:function(t){var e=s.f;return e?e(a(t)):[]}})},489:(t,e,r)=>{var n=r(2109),o=r(7293),i=r(7908),s=r(9518),a=r(8544);n({target:"Object",stat:!0,forced:o((function(){s(1)})),sham:!a},{getPrototypeOf:function(t){return s(i(t))}})},8304:(t,e,r)=>{r(2109)({target:"Object",stat:!0},{setPrototypeOf:r(7674)})},1539:(t,e,r)=>{var n=r(1694),o=r(8052),i=r(288);n||o(Object.prototype,"toString",i,{unsafe:!0})},6833:(t,e,r)=>{var n=r(2109),o=r(4699).values;n({target:"Object",stat:!0},{values:function(t){return o(t)}})},1058:(t,e,r)=>{var n=r(2109),o=r(3009);n({global:!0,forced:parseInt!=o},{parseInt:o})},2419:(t,e,r)=>{var n=r(2109),o=r(5005),i=r(2104),s=r(7065),a=r(9483),c=r(9670),u=r(111),l=r(30),f=r(7293),h=o("Reflect","construct"),p=Object.prototype,d=[].push,y=f((function(){function t(){}return!(h((function(){}),[],t)instanceof t)})),v=!f((function(){h((function(){}))})),g=y||v;n({target:"Reflect",stat:!0,forced:g,sham:g},{construct:function(t,e){a(t),c(e);var r=arguments.length<3?t:a(arguments[2]);if(v&&!y)return h(t,e,r);if(t==r){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return i(d,n,e),new(i(s,t,n))}var o=r.prototype,f=l(u(o)?o:p),g=i(t,f,e);return u(g)?g:f}})},4819:(t,e,r)=>{var n=r(2109),o=r(6916),i=r(111),s=r(9670),a=r(5032),c=r(1236),u=r(9518);n({target:"Reflect",stat:!0},{get:function t(e,r){var n,l,f=arguments.length<3?e:arguments[2];return s(e)===f?e[r]:(n=c.f(e,r))?a(n)?n.value:void 0===n.get?void 0:o(n.get,f):i(l=u(e))?t(l,r,f):void 0}})},4916:(t,e,r)=>{"use strict";var n=r(2109),o=r(2261);n({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},2087:(t,e,r)=>{var n=r(7854),o=r(9781),i=r(7045),s=r(7066),a=r(7293),c=n.RegExp,u=c.prototype;o&&a((function(){var t=!0;try{c(".","d")}catch(e){t=!1}var e={},r="",n=t?"dgimsy":"gimsy",o=function(t,n){Object.defineProperty(e,t,{get:function(){return r+=n,!0}})},i={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var s in t&&(i.hasIndices="d"),i)o(s,i[s]);return Object.getOwnPropertyDescriptor(u,"flags").get.call(e)!==n||r!==n}))&&i(u,"flags",{configurable:!0,get:s})},9714:(t,e,r)=>{"use strict";var n=r(6530).PROPER,o=r(8052),i=r(9670),s=r(1340),a=r(7293),c=r(4706),u="toString",l=RegExp.prototype.toString,f=a((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),h=n&&l.name!=u;(f||h)&&o(RegExp.prototype,u,(function(){var t=i(this);return"/"+s(t.source)+"/"+s(c(t))}),{unsafe:!0})},2023:(t,e,r)=>{"use strict";var n=r(2109),o=r(1702),i=r(3929),s=r(4488),a=r(1340),c=r(4964),u=o("".indexOf);n({target:"String",proto:!0,forced:!c("includes")},{includes:function(t){return!!~u(a(s(this)),a(i(t)),arguments.length>1?arguments[1]:void 0)}})},8783:(t,e,r)=>{"use strict";var n=r(8710).charAt,o=r(1340),i=r(9909),s=r(1656),a="String Iterator",c=i.set,u=i.getterFor(a);s(String,"String",(function(t){c(this,{type:a,string:o(t),index:0})}),(function(){var t,e=u(this),r=e.string,o=e.index;return o>=r.length?{value:void 0,done:!0}:(t=n(r,o),e.index+=t.length,{value:t,done:!1})}))},4032:(t,e,r)=>{"use strict";var n=r(2109),o=r(7854),i=r(6916),s=r(1702),a=r(1913),c=r(9781),u=r(6293),l=r(7293),f=r(2597),h=r(7976),p=r(9670),d=r(5656),y=r(4948),v=r(1340),g=r(9114),m=r(30),b=r(1956),w=r(8006),x=r(1156),O=r(5181),S=r(1236),E=r(3070),C=r(6048),T=r(5296),k=r(8052),A=r(2309),R=r(6200),I=r(3501),_=r(9711),j=r(5112),P=r(6061),L=r(6800),B=r(6532),D=r(8003),M=r(9909),N=r(2092).forEach,V=R("hidden"),F="Symbol",z=M.set,q=M.getterFor(F),Y=Object.prototype,U=o.Symbol,W=U&&U.prototype,H=o.TypeError,$=o.QObject,K=S.f,Z=E.f,G=x.f,X=T.f,J=s([].push),Q=A("symbols"),tt=A("op-symbols"),et=A("wks"),rt=!$||!$.prototype||!$.prototype.findChild,nt=c&&l((function(){return 7!=m(Z({},"a",{get:function(){return Z(this,"a",{value:7}).a}})).a}))?function(t,e,r){var n=K(Y,e);n&&delete Y[e],Z(t,e,r),n&&t!==Y&&Z(Y,e,n)}:Z,ot=function(t,e){var r=Q[t]=m(W);return z(r,{type:F,tag:t,description:e}),c||(r.description=e),r},it=function(t,e,r){t===Y&&it(tt,e,r),p(t);var n=y(e);return p(r),f(Q,n)?(r.enumerable?(f(t,V)&&t[V][n]&&(t[V][n]=!1),r=m(r,{enumerable:g(0,!1)})):(f(t,V)||Z(t,V,g(1,{})),t[V][n]=!0),nt(t,n,r)):Z(t,n,r)},st=function(t,e){p(t);var r=d(e),n=b(r).concat(lt(r));return N(n,(function(e){c&&!i(at,r,e)||it(t,e,r[e])})),t},at=function(t){var e=y(t),r=i(X,this,e);return!(this===Y&&f(Q,e)&&!f(tt,e))&&(!(r||!f(this,e)||!f(Q,e)||f(this,V)&&this[V][e])||r)},ct=function(t,e){var r=d(t),n=y(e);if(r!==Y||!f(Q,n)||f(tt,n)){var o=K(r,n);return!o||!f(Q,n)||f(r,V)&&r[V][n]||(o.enumerable=!0),o}},ut=function(t){var e=G(d(t)),r=[];return N(e,(function(t){f(Q,t)||f(I,t)||J(r,t)})),r},lt=function(t){var e=t===Y,r=G(e?tt:d(t)),n=[];return N(r,(function(t){!f(Q,t)||e&&!f(Y,t)||J(n,Q[t])})),n};u||(k(W=(U=function(){if(h(W,this))throw H("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?v(arguments[0]):void 0,e=_(t),r=function(t){this===Y&&i(r,tt,t),f(this,V)&&f(this[V],e)&&(this[V][e]=!1),nt(this,e,g(1,t))};return c&&rt&&nt(Y,e,{configurable:!0,set:r}),ot(e,t)}).prototype,"toString",(function(){return q(this).tag})),k(U,"withoutSetter",(function(t){return ot(_(t),t)})),T.f=at,E.f=it,C.f=st,S.f=ct,w.f=x.f=ut,O.f=lt,P.f=function(t){return ot(j(t),t)},c&&(Z(W,"description",{configurable:!0,get:function(){return q(this).description}}),a||k(Y,"propertyIsEnumerable",at,{unsafe:!0}))),n({global:!0,constructor:!0,wrap:!0,forced:!u,sham:!u},{Symbol:U}),N(b(et),(function(t){L(t)})),n({target:F,stat:!0,forced:!u},{useSetter:function(){rt=!0},useSimple:function(){rt=!1}}),n({target:"Object",stat:!0,forced:!u,sham:!c},{create:function(t,e){return void 0===e?m(t):st(m(t),e)},defineProperty:it,defineProperties:st,getOwnPropertyDescriptor:ct}),n({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:ut}),B(),D(U,F),I[V]=!0},1817:(t,e,r)=>{"use strict";var n=r(2109),o=r(9781),i=r(7854),s=r(1702),a=r(2597),c=r(614),u=r(7976),l=r(1340),f=r(3070).f,h=r(9920),p=i.Symbol,d=p&&p.prototype;if(o&&c(p)&&(!("description"in d)||void 0!==p().description)){var y={},v=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:l(arguments[0]),e=u(d,this)?new p(t):void 0===t?p():p(t);return""===t&&(y[e]=!0),e};h(v,p),v.prototype=d,d.constructor=v;var g="Symbol(test)"==String(p("test")),m=s(d.valueOf),b=s(d.toString),w=/^Symbol\((.*)\)[^)]+$/,x=s("".replace),O=s("".slice);f(d,"description",{configurable:!0,get:function(){var t=m(this);if(a(y,t))return"";var e=b(t),r=g?O(e,7,-1):x(e,w,"$1");return""===r?void 0:r}}),n({global:!0,constructor:!0,forced:!0},{Symbol:v})}},763:(t,e,r)=>{var n=r(2109),o=r(5005),i=r(2597),s=r(1340),a=r(2309),c=r(2015),u=a("string-to-symbol-registry"),l=a("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!c},{for:function(t){var e=s(t);if(i(u,e))return u[e];var r=o("Symbol")(e);return u[e]=r,l[r]=e,r}})},2165:(t,e,r)=>{r(6800)("iterator")},2526:(t,e,r)=>{r(4032),r(763),r(6620),r(8862),r(9660)},6620:(t,e,r)=>{var n=r(2109),o=r(2597),i=r(2190),s=r(6330),a=r(2309),c=r(2015),u=a("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!c},{keyFor:function(t){if(!i(t))throw TypeError(s(t)+" is not a symbol");if(o(u,t))return u[t]}})},4747:(t,e,r)=>{var n=r(7854),o=r(8324),i=r(8509),s=r(8533),a=r(8880),c=function(t){if(t&&t.forEach!==s)try{a(t,"forEach",s)}catch(e){t.forEach=s}};for(var u in o)o[u]&&c(n[u]&&n[u].prototype);c(i)},3948:(t,e,r)=>{var n=r(7854),o=r(8324),i=r(8509),s=r(6992),a=r(8880),c=r(5112),u=c("iterator"),l=c("toStringTag"),f=s.values,h=function(t,e){if(t){if(t[u]!==f)try{a(t,u,f)}catch(e){t[u]=f}if(t[l]||a(t,l,e),o[e])for(var r in s)if(t[r]!==s[r])try{a(t,r,s[r])}catch(e){t[r]=s[r]}}};for(var p in o)h(n[p]&&n[p].prototype,p);h(i,"DOMTokenList")},6815:(t,e,r)=>{var n=r(2109),o=r(7854),i=r(7152).setInterval;n({global:!0,bind:!0,forced:o.setInterval!==i},{setInterval:i})},8417:(t,e,r)=>{var n=r(2109),o=r(7854),i=r(7152).setTimeout;n({global:!0,bind:!0,forced:o.setTimeout!==i},{setTimeout:i})},2564:(t,e,r)=>{r(6815),r(8417)}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;r.g.importScripts&&(t=r.g.location+"");var e=r.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t+"../"})(),(()=>{"use strict";var t={};r.r(t),r.d(t,{Decoder:()=>st,Encoder:()=>it,PacketType:()=>ot,protocol:()=>nt});r.p,r.p,r.p,r.p,r.p,r.p;const e=Object.create(null);e.open="0",e.close="1",e.ping="2",e.pong="3",e.message="4",e.upgrade="5",e.noop="6";const n=Object.create(null);Object.keys(e).forEach((t=>{n[e[t]]=t}));const o={type:"error",data:"parser error"},i="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),s="function"==typeof ArrayBuffer,a=(t,e)=>{const r=new FileReader;return r.onload=function(){const t=r.result.split(",")[1];e("b"+t)},r.readAsDataURL(t)},c=({type:t,data:r},n,o)=>{return i&&r instanceof Blob?n?o(r):a(r,o):s&&(r instanceof ArrayBuffer||(c=r,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(c):c&&c.buffer instanceof ArrayBuffer))?n?o(r):a(new Blob([r]),o):o(e[t]+(r||""));var c},u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let t=0;t<u.length;t++)l[u.charCodeAt(t)]=t;const f="function"==typeof ArrayBuffer,h=(t,e)=>{if(f){const r=(t=>{let e,r,n,o,i,s=.75*t.length,a=t.length,c=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);const u=new ArrayBuffer(s),f=new Uint8Array(u);for(e=0;e<a;e+=4)r=l[t.charCodeAt(e)],n=l[t.charCodeAt(e+1)],o=l[t.charCodeAt(e+2)],i=l[t.charCodeAt(e+3)],f[c++]=r<<2|n>>4,f[c++]=(15&n)<<4|o>>2,f[c++]=(3&o)<<6|63&i;return u})(t);return p(r,e)}return{base64:!0,data:t}},p=(t,e)=>"blob"===e&&t instanceof ArrayBuffer?new Blob([t]):t,d=(t,e)=>{if("string"!=typeof t)return{type:"message",data:p(t,e)};const r=t.charAt(0);if("b"===r)return{type:"message",data:h(t.substring(1),e)};return n[r]?t.length>1?{type:n[r],data:t.substring(1)}:{type:n[r]}:o},y=String.fromCharCode(30);function v(t){if(t)return function(t){for(var e in v.prototype)t[e]=v.prototype[e];return t}(t)}v.prototype.on=v.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},v.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this},v.prototype.off=v.prototype.removeListener=v.prototype.removeAllListeners=v.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var o=0;o<n.length;o++)if((r=n[o])===e||r.fn===e){n.splice(o,1);break}return 0===n.length&&delete this._callbacks["$"+t],this},v.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),r=this._callbacks["$"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(r){n=0;for(var o=(r=r.slice(0)).length;n<o;++n)r[n].apply(this,e)}return this},v.prototype.emitReserved=v.prototype.emit,v.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},v.prototype.hasListeners=function(t){return!!this.listeners(t).length};const g="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function m(t,...e){return e.reduce(((e,r)=>(t.hasOwnProperty(r)&&(e[r]=t[r]),e)),{})}const b=setTimeout,w=clearTimeout;function x(t,e){e.useNativeTimers?(t.setTimeoutFn=b.bind(g),t.clearTimeoutFn=w.bind(g)):(t.setTimeoutFn=setTimeout.bind(g),t.clearTimeoutFn=clearTimeout.bind(g))}class O extends Error{constructor(t,e,r){super(t),this.description=e,this.context=r,this.type="TransportError"}}class S extends v{constructor(t){super(),this.writable=!1,x(this,t),this.opts=t,this.query=t.query,this.readyState="",this.socket=t.socket}onError(t,e,r){return super.emitReserved("error",new O(t,e,r)),this}open(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(t){"open"===this.readyState&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const e=d(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}}const E="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),C={};let T,k=0,A=0;function R(t){let e="";do{e=E[t%64]+e,t=Math.floor(t/64)}while(t>0);return e}function I(){const t=R(+new Date);return t!==T?(k=0,T=t):t+"."+R(k++)}for(;A<64;A++)C[E[A]]=A;function _(t){let e="";for(let r in t)t.hasOwnProperty(r)&&(e.length&&(e+="&"),e+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e}let j=!1;try{j="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){}const P=j;function L(t){const e=t.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!e||P))return new XMLHttpRequest}catch(t){}if(!e)try{return new(g[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}function B(){}const D=null!=new L({xdomain:!1}).responseType;class M extends v{constructor(t,e){super(),x(this,e),this.opts=e,this.method=e.method||"GET",this.uri=t,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.create()}create(){const t=m(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;const e=this.xhr=new L(t);try{e.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0);for(let t in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(t)&&e.setRequestHeader(t,this.opts.extraHeaders[t])}}catch(t){}if("POST"===this.method)try{e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{e.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in e&&(e.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(e.timeout=this.opts.requestTimeout),e.onreadystatechange=()=>{4===e.readyState&&(200===e.status||1223===e.status?this.onLoad():this.setTimeoutFn((()=>{this.onError("number"==typeof e.status?e.status:0)}),0))},e.send(this.data)}catch(t){return void this.setTimeoutFn((()=>{this.onError(t)}),0)}"undefined"!=typeof document&&(this.index=M.requestsCount++,M.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=B,t)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete M.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;null!==t&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}if(M.requestsCount=0,M.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",N);else if("function"==typeof addEventListener){addEventListener("onpagehide"in g?"pagehide":"unload",N,!1)}function N(){for(let t in M.requests)M.requests.hasOwnProperty(t)&&M.requests[t].abort()}const V="function"==typeof Promise&&"function"==typeof Promise.resolve?t=>Promise.resolve().then(t):(t,e)=>e(t,0),F=g.WebSocket||g.MozWebSocket,z="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();const q={websocket:class extends S{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),e=this.opts.protocols,r=z?{}:m(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=z?new F(t,e,r):e?new F(t,e):new F(t)}catch(t){return this.emitReserved("error",t)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const r=t[e],n=e===t.length-1;c(r,this.supportsBinary,(t=>{try{this.ws.send(t)}catch(t){}n&&V((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let t=this.query||{};const e=this.opts.secure?"wss":"ws";let r="";this.opts.port&&("wss"===e&&443!==Number(this.opts.port)||"ws"===e&&80!==Number(this.opts.port))&&(r=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=I()),this.supportsBinary||(t.b64=1);const n=_(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(n.length?"?"+n:"")}check(){return!!F}},polling:class extends S{constructor(t){if(super(t),this.polling=!1,"undefined"!=typeof location){const e="https:"===location.protocol;let r=location.port;r||(r=e?"443":"80"),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||r!==t.port,this.xs=t.secure!==e}const e=t&&t.forceBase64;this.supportsBinary=D&&!e}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let t=0;this.polling&&(t++,this.once("pollComplete",(function(){--t||e()}))),this.writable||(t++,this.once("drain",(function(){--t||e()})))}else e()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){((t,e)=>{const r=t.split(y),n=[];for(let t=0;t<r.length;t++){const o=d(r[t],e);if(n.push(o),"error"===o.type)break}return n})(t,this.socket.binaryType).forEach((t=>{if("opening"===this.readyState&&"open"===t.type&&this.onOpen(),"close"===t.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(t)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}write(t){this.writable=!1,((t,e)=>{const r=t.length,n=new Array(r);let o=0;t.forEach(((t,i)=>{c(t,!1,(t=>{n[i]=t,++o===r&&e(n.join(y))}))}))})(t,(t=>{this.doWrite(t,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){let t=this.query||{};const e=this.opts.secure?"https":"http";let r="";!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=I()),this.supportsBinary||t.sid||(t.b64=1),this.opts.port&&("https"===e&&443!==Number(this.opts.port)||"http"===e&&80!==Number(this.opts.port))&&(r=":"+this.opts.port);const n=_(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(n.length?"?"+n:"")}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new M(this.uri(),t)}doWrite(t,e){const r=this.request({method:"POST",data:t});r.on("success",e),r.on("error",((t,e)=>{this.onError("xhr post error",t,e)}))}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",((t,e)=>{this.onError("xhr poll error",t,e)})),this.pollXhr=t}}},Y=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,U=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function W(t){const e=t,r=t.indexOf("["),n=t.indexOf("]");-1!=r&&-1!=n&&(t=t.substring(0,r)+t.substring(r,n).replace(/:/g,";")+t.substring(n,t.length));let o=Y.exec(t||""),i={},s=14;for(;s--;)i[U[s]]=o[s]||"";return-1!=r&&-1!=n&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=function(t,e){const r=/\/{2,9}/g,n=e.replace(r,"/").split("/");"/"!=e.substr(0,1)&&0!==e.length||n.splice(0,1);"/"==e.substr(e.length-1,1)&&n.splice(n.length-1,1);return n}(0,i.path),i.queryKey=function(t,e){const r={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,e,n){e&&(r[e]=n)})),r}(0,i.query),i}class H extends v{constructor(t,e={}){super(),t&&"object"==typeof t&&(e=t,t=null),t?(t=W(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=W(e.host).host),x(this,e),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=e.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},e),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=function(t){let e={},r=t.split("&");for(let t=0,n=r.length;t<n;t++){let n=r[t].split("=");e[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}return e}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",(()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())}),!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const e=Object.assign({},this.opts.query);e.EIO=4,e.transport=t,this.id&&(e.sid=this.id);const r=Object.assign({},this.opts.transportOptions[t],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new q[t](r)}open(){let t;if(this.opts.rememberUpgrade&&H.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(t=>this.onClose("transport close",t)))}probe(t){let e=this.createTransport(t),r=!1;H.priorWebsocketSuccess=!1;const n=()=>{r||(e.send([{type:"ping",data:"probe"}]),e.once("packet",(t=>{if(!r)if("pong"===t.type&&"probe"===t.data){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;H.priorWebsocketSuccess="websocket"===e.name,this.transport.pause((()=>{r||"closed"!==this.readyState&&(u(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())}))}else{const t=new Error("probe error");t.transport=e.name,this.emitReserved("upgradeError",t)}})))};function o(){r||(r=!0,u(),e.close(),e=null)}const i=t=>{const r=new Error("probe error: "+t);r.transport=e.name,o(),this.emitReserved("upgradeError",r)};function s(){i("transport closed")}function a(){i("socket closed")}function c(t){e&&t.name!==e.name&&o()}const u=()=>{e.removeListener("open",n),e.removeListener("error",i),e.removeListener("close",s),this.off("close",a),this.off("upgrading",c)};e.once("open",n),e.once("error",i),e.once("close",s),this.once("close",a),this.once("upgrading",c),e.open()}onOpen(){if(this.readyState="open",H.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){let t=0;const e=this.upgrades.length;for(;t<e;t++)this.probe(this.upgrades[t])}}onPacket(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data)}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let r=0;r<this.writeBuffer.length;r++){const n=this.writeBuffer[r].data;if(n&&(t+="string"==typeof(e=n)?function(t){let e=0,r=0;for(let n=0,o=t.length;n<o;n++)e=t.charCodeAt(n),e<128?r+=1:e<2048?r+=2:e<55296||e>=57344?r+=3:(n++,r+=4);return r}(e):Math.ceil(1.33*(e.byteLength||e.size))),r>0&&t>this.maxPayload)return this.writeBuffer.slice(0,r);t+=2}var e;return this.writeBuffer}write(t,e,r){return this.sendPacket("message",t,e,r),this}send(t,e,r){return this.sendPacket("message",t,e,r),this}sendPacket(t,e,r,n){if("function"==typeof e&&(n=e,e=void 0),"function"==typeof r&&(n=r,r=null),"closing"===this.readyState||"closed"===this.readyState)return;(r=r||{}).compress=!1!==r.compress;const o={type:t,data:e,options:r};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),n&&this.once("flush",n),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},r=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?r():t()})):this.upgrading?r():t()),this}onError(t){H.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const e=[];let r=0;const n=t.length;for(;r<n;r++)~this.transports.indexOf(t[r])&&e.push(t[r]);return e}}H.protocol=4;H.protocol;const $="function"==typeof ArrayBuffer,K=Object.prototype.toString,Z="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===K.call(Blob),G="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===K.call(File);function X(t){return $&&(t instanceof ArrayBuffer||(t=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer)(t))||Z&&t instanceof Blob||G&&t instanceof File}function J(t,e){if(!t||"object"!=typeof t)return!1;if(Array.isArray(t)){for(let e=0,r=t.length;e<r;e++)if(J(t[e]))return!0;return!1}if(X(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return J(t.toJSON(),!0);for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&J(t[e]))return!0;return!1}function Q(t){const e=[],r=t.data,n=t;return n.data=tt(r,e),n.attachments=e.length,{packet:n,buffers:e}}function tt(t,e){if(!t)return t;if(X(t)){const r={_placeholder:!0,num:e.length};return e.push(t),r}if(Array.isArray(t)){const r=new Array(t.length);for(let n=0;n<t.length;n++)r[n]=tt(t[n],e);return r}if("object"==typeof t&&!(t instanceof Date)){const r={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=tt(t[n],e));return r}return t}function et(t,e){return t.data=rt(t.data,e),t.attachments=void 0,t}function rt(t,e){if(!t)return t;if(t&&!0===t._placeholder){if("number"==typeof t.num&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=rt(t[r],e);else if("object"==typeof t)for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=rt(t[r],e));return t}const nt=5;var ot;!function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"}(ot||(ot={}));class it{constructor(t){this.replacer=t}encode(t){return t.type!==ot.EVENT&&t.type!==ot.ACK||!J(t)?[this.encodeAsString(t)]:(t.type=t.type===ot.EVENT?ot.BINARY_EVENT:ot.BINARY_ACK,this.encodeAsBinary(t))}encodeAsString(t){let e=""+t.type;return t.type!==ot.BINARY_EVENT&&t.type!==ot.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){const e=Q(t),r=this.encodeAsString(e.packet),n=e.buffers;return n.unshift(r),n}}class st extends v{constructor(t){super(),this.reviver=t}add(t){let e;if("string"==typeof t){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(t),e.type===ot.BINARY_EVENT||e.type===ot.BINARY_ACK?(this.reconstructor=new at(e),0===e.attachments&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else{if(!X(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e))}}decodeString(t){let e=0;const r={type:Number(t.charAt(0))};if(void 0===ot[r.type])throw new Error("unknown packet type "+r.type);if(r.type===ot.BINARY_EVENT||r.type===ot.BINARY_ACK){const n=e+1;for(;"-"!==t.charAt(++e)&&e!=t.length;);const o=t.substring(n,e);if(o!=Number(o)||"-"!==t.charAt(e))throw new Error("Illegal attachments");r.attachments=Number(o)}if("/"===t.charAt(e+1)){const n=e+1;for(;++e;){if(","===t.charAt(e))break;if(e===t.length)break}r.nsp=t.substring(n,e)}else r.nsp="/";const n=t.charAt(e+1);if(""!==n&&Number(n)==n){const n=e+1;for(;++e;){const r=t.charAt(e);if(null==r||Number(r)!=r){--e;break}if(e===t.length)break}r.id=Number(t.substring(n,e+1))}if(t.charAt(++e)){const n=this.tryParse(t.substr(e));if(!st.isPayloadValid(r.type,n))throw new Error("invalid payload");r.data=n}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch(t){return!1}}static isPayloadValid(t,e){switch(t){case ot.CONNECT:return"object"==typeof e;case ot.DISCONNECT:return void 0===e;case ot.CONNECT_ERROR:return"string"==typeof e||"object"==typeof e;case ot.EVENT:case ot.BINARY_EVENT:return Array.isArray(e)&&e.length>0;case ot.ACK:case ot.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}class at{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const t=et(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function ct(t,e,r){return t.on(e,r),function(){t.off(e,r)}}const ut=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class lt extends v{constructor(t,e,r){super(),this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,r&&r.auth&&(this.auth=r.auth),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[ct(t,"open",this.onopen.bind(this)),ct(t,"packet",this.onpacket.bind(this)),ct(t,"error",this.onerror.bind(this)),ct(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){if(ut.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');e.unshift(t);const r={type:ot.EVENT,data:e,options:{}};if(r.options.compress=!1!==this.flags.compress,"function"==typeof e[e.length-1]){const t=this.ids++,n=e.pop();this._registerAckCallback(t,n),r.id=t}const n=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!n||!this.connected)||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(t,e){const r=this.flags.timeout;if(void 0===r)return void(this.acks[t]=e);const n=this.io.setTimeoutFn((()=>{delete this.acks[t];for(let e=0;e<this.sendBuffer.length;e++)this.sendBuffer[e].id===t&&this.sendBuffer.splice(e,1);e.call(this,new Error("operation has timed out"))}),r);this.acks[t]=(...t)=>{this.io.clearTimeoutFn(n),e.apply(this,[null,...t])}}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){"function"==typeof this.auth?this.auth((t=>{this.packet({type:ot.CONNECT,data:t})})):this.packet({type:ot.CONNECT,data:this.auth})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case ot.CONNECT:if(t.data&&t.data.sid){const e=t.data.sid;this.onconnect(e)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ot.EVENT:case ot.BINARY_EVENT:this.onevent(t);break;case ot.ACK:case ot.BINARY_ACK:this.onack(t);break;case ot.DISCONNECT:this.ondisconnect();break;case ot.CONNECT_ERROR:this.destroy();const e=new Error(t.data.message);e.data=t.data.data,this.emitReserved("connect_error",e)}}onevent(t){const e=t.data||[];null!=t.id&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const r of e)r.apply(this,t)}super.emit.apply(this,t)}ack(t){const e=this;let r=!1;return function(...n){r||(r=!0,e.packet({type:ot.ACK,id:t,data:n}))}}onack(t){const e=this.acks[t.id];"function"==typeof e&&(e.apply(this,t.data),delete this.acks[t.id])}onconnect(t){this.id=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach((t=>this.emitEvent(t))),this.receiveBuffer=[],this.sendBuffer.forEach((t=>{this.notifyOutgoingListeners(t),this.packet(t)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((t=>t())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ot.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let r=0;r<e.length;r++)if(t===e[r])return e.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const e=this._anyOutgoingListeners;for(let r=0;r<e.length;r++)if(t===e[r])return e.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const r of e)r.apply(this,t.data)}}}function ft(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}ft.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),r=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-r:t+r}return 0|Math.min(t,this.max)},ft.prototype.reset=function(){this.attempts=0},ft.prototype.setMin=function(t){this.ms=t},ft.prototype.setMax=function(t){this.max=t},ft.prototype.setJitter=function(t){this.jitter=t};class ht extends v{constructor(e,r){var n;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(r=e,e=void 0),(r=r||{}).path=r.path||"/socket.io",this.opts=r,x(this,r),this.reconnection(!1!==r.reconnection),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(n=r.randomizationFactor)&&void 0!==n?n:.5),this.backoff=new ft({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==r.timeout?2e4:r.timeout),this._readyState="closed",this.uri=e;const o=r.parser||t;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this._autoConnect=!1!==r.autoConnect,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}randomizationFactor(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new H(this.uri,this.opts);const e=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const n=ct(e,"open",(function(){r.onopen(),t&&t()})),o=ct(e,"error",(e=>{r.cleanup(),r._readyState="closed",this.emitReserved("error",e),t?t(e):r.maybeReconnectOnOpen()}));if(!1!==this._timeout){const t=this._timeout;0===t&&n();const r=this.setTimeoutFn((()=>{n(),e.close(),e.emit("error",new Error("timeout"))}),t);this.opts.autoUnref&&r.unref(),this.subs.push((function(){clearTimeout(r)}))}return this.subs.push(n),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(ct(t,"ping",this.onping.bind(this)),ct(t,"data",this.ondata.bind(this)),ct(t,"error",this.onerror.bind(this)),ct(t,"close",this.onclose.bind(this)),ct(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(t){this.onclose("parse error")}}ondecoded(t){this.emitReserved("packet",t)}onerror(t){this.emitReserved("error",t)}socket(t,e){let r=this.nsps[t];return r||(r=new lt(this,t,e),this.nsps[t]=r),r}_destroy(t){const e=Object.keys(this.nsps);for(const t of e){if(this.nsps[t].active)return}this._close()}_packet(t){const e=this.encoder.encode(t);for(let r=0;r<e.length;r++)this.engine.write(e[r],t.options)}cleanup(){this.subs.forEach((t=>t())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,e){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn((()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((e=>{e?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",e)):t.onreconnect()})))}),e);this.opts.autoUnref&&r.unref(),this.subs.push((function(){clearTimeout(r)}))}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const pt={};function dt(t,e){"object"==typeof t&&(e=t,t=void 0);const r=function(t,e="",r){let n=t;r=r||"undefined"!=typeof location&&location,null==t&&(t=r.protocol+"//"+r.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?r.protocol+t:r.host+t),/^(https?|wss?):\/\//.test(t)||(t=void 0!==r?r.protocol+"//"+t:"https://"+t),n=W(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const o=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+o+":"+n.port+e,n.href=n.protocol+"://"+o+(r&&r.port===n.port?"":":"+n.port),n}(t,(e=e||{}).path||"/socket.io"),n=r.source,o=r.id,i=r.path,s=pt[o]&&i in pt[o].nsps;let a;return e.forceNew||e["force new connection"]||!1===e.multiplex||s?a=new ht(n,e):(pt[o]||(pt[o]=new ht(n,e)),a=pt[o]),r.query&&!e.query&&(e.query=r.queryKey),a.socket(r.path,e)}Object.assign(dt,{Manager:ht,Socket:lt,io:dt,connect:dt});r(2087),r(1249),r(4812),r(2222),r(9070),r(1058),r(8304),r(489),r(1539),r(2419),r(8011),r(4819),r(5003),r(9753),r(2526),r(1817),r(2165),r(6992),r(8783),r(3948),r(1038),r(7042),r(8309),r(4916),r(9600);function yt(t){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yt(t)}function vt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function mt(t,e){return mt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},mt(t,e)}function bt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=xt(t);if(e){var o=xt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return wt(this,r)}}function wt(t,e){if(e&&("object"===yt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function xt(t){return xt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xt(t)}const Ot=function(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mt(t,e)}(i,t);var e,r,n,o=bt(i);function i(){vt(this,i);for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return o.call.apply(o,[this].concat(e))}return e=i,(r=[{key:"transitionDuration",set:function(t){this.domElement.style.transitionDuration="".concat(t/1e3,"s")}},{key:"transform",set:function(t){var e=t.translation,r=t.translation2,n=t.factor,o="";if(e){var i=e.map((function(t){return"".concat(t,"px")})).join(", ");o+="translate(".concat(i,")")}if(r){var s=r.map((function(t){return"".concat(t,"px")})).join(", ");o+=" translate(".concat(s,")")}n&&(o+=" scale(".concat(n,")")),this.domElement.style.transform=o}}])&&gt(e.prototype,r),n&&gt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(t)};function St(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Et(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const Ct=Ot(function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Et(this,"bumpDuration",60),Et(this,"stampDuration",200),Et(this,"pauseBetweenBumpsDuration",200),Et(this,"lastCoords",[null,null]),Et(this,"coordsInView",[null,null]),Et(this,"translateVector",[null,null]),this.game=e,this.position=r,this.domElement=n,this.sprite=n}var e,r,n;return e=t,r=[{key:"render",value:function(){for(var t in[0,1]){var e=this.game.map.canvasOrigin[t]+this.game.map.cellPadding;this.translateVector[t]=e+this.coordsInView[t]*this.game.map.cellSize}if(this.transform={translation:this.translateVector},!this.game.flags.isTranslating){var r=this.game.map.cellSize-2*this.game.map.cellPadding;this.sprite.style.width=this.sprite.style.height="".concat(r,"px")}}},{key:"stampAnimation",value:function(){var t=this;this.game.flags.isStamping=!0,this.transitionDuration=this.stampDuration/2,this.transform={translation:this.translateVector,factor:.9},this.sprite.classList.add("stamp"),this.game.animationTimeout((function(){t.sprite.classList.remove("stamp"),t.transform={translation:t.translateVector},t.game.flags.isStamping=!1}),this.stampDuration/2)}},{key:"bumpAnimation",value:function(t){var e=this;if(!this.game.flags.isBumping){this.game.flags.isBumping=!0,this.transitionDuration=this.bumpDuration;var r={up:[0,-1],down:[0,1],left:[-1,0],right:[1,0]}[t],n=r.map((function(t){return t*e.game.map.cellPadding*1.2})),o=r.map((function(t){return 1-.1*Math.abs(t)}));this.transform={translation:this.translateVector,translation2:n,factor:o},this.game.animationTimeout((function(){e.transitionDuration=e.game.durations.translation,e.transform={translation:e.translateVector},e.game.animationTimeout((function(){e.game.flags.isBumping=!1}),e.pauseBetweenBumpsDuration)}),this.bumpDuration)}}}],r&&St(e.prototype,r),n&&St(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}());function Tt(t){return Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tt(t)}function kt(t){return function(t){if(Array.isArray(t))return At(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return At(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return At(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function At(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Rt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function It(){return It="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=_t(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},It.apply(this,arguments)}function _t(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Dt(t)););return t}function jt(t,e){return jt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},jt(t,e)}function Pt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Dt(t);if(e){var o=Dt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Lt(this,r)}}function Lt(t,e){if(e&&("object"===Tt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Bt(t)}function Bt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Dt(t){return Dt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Dt(t)}function Mt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Nt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jt(t,e)}(i,t);var e,r,n,o=Pt(i);function i(t,e){var r,n=e.position,s=e.palette,a=e.ownCells,c=e.allowedCells;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Mt(Bt(r=o.call(this,t,n,document.getElementById("player"))),"is",{}),Mt(Bt(r),"coordsInViewCoef",[null,null]),r.palette=s,r.ownCells=a,r.allowedCells=c,r}return e=i,r=[{key:"setColor",value:function(t){this.selectedColorIndex=t,this.selectedColor=this.palette[t],this.sprite.style.background=this.selectedColor}},{key:"updatePosition",value:function(t,e){this.coords&&(this.lastCoords=kt(this.coords)),t&&(this.lastPosition=parseInt("".concat(this.position),10),this.position=t),e&&(this.lastDirection=e),this.coords=this.game.map.indexToCoords(this.position)}},{key:"render",value:function(){this.transitionDuration=this.game.flags.isTranslating?this.game.durations.translation:this.game.flags.isZooming?this.game.durations.zoom:0,It(Dt(i.prototype),"render",this).call(this)}},{key:"updateCoordsInView",value:function(){for(var t in this.lastCoordsInView=kt(this.coordsInView),[0,1]){var e=this.coords[t],r=[this.game.map.cols,this.game.map.rows][t],n=this.game.map.maxCoordsInView[t],o=(n-1)/2;this.coordsInView[t]=this.getCoordsInView(r,n,o,e),this.coordsInViewCoef[t]=this.getCoordsInViewCoef(r,o,e)}}},{key:"getCoordsInView",value:function(t,e,r,n){return n<Math.ceil(r)?n:n>t-r-1?n+e-t:r}},{key:"getCoordsInViewCoef",value:function(t,e,r){return r<=e?0:r>=t-e-1?1:.5}}],r&&Rt(e.prototype,r),n&&Rt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(Ct);r(1532),r(6833),r(9554),r(4747);function Vt(t){return Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vt(t)}function Ft(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function zt(){return zt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=qt(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},zt.apply(this,arguments)}function qt(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ht(t)););return t}function Yt(t,e){return Yt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Yt(t,e)}function Ut(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Ht(t);if(e){var o=Ht(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Wt(this,r)}}function Wt(t,e){if(e&&("object"===Vt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Ht(t){return Ht=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ht(t)}var $t=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yt(t,e)}(i,t);var e,r,n,o=Ut(i);function i(t,e){var r,n=e.id,s=e.position;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var a=document.createElement("div");return a.classList.add("player"),document.querySelector("#view").appendChild(a),(r=o.call(this,t,s,a)).id=n,r}return e=i,r=[{key:"setColor",value:function(t){this.sprite.style.background="#".concat(t)}},{key:"updatePosition",value:function(t){this.position=t,this.coords=this.game.map.indexToCoords(this.position)}},{key:"updateCoordsInView",value:function(){for(var t in[0,1])this.coordsInView[t]=this.coords[t]+this.game.player.coordsInView[t]-this.game.player.coords[t]}},{key:"render",value:function(){this.transitionDuration=this.game.flags.isZooming?this.game.durations.zoom:this.game.flags.isFullRendering?0:this.game.durations.translation,zt(Ht(i.prototype),"render",this).call(this)}}],r&&Ft(e.prototype,r),n&&Ft(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(Ct);function Kt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Zt=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,r){e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(this,"collection",new Map),this.game=e,this.playersData=r}var e,r,n;return e=t,r=[{key:"positions",get:function(){return Object.values(this.collection).map((function(t){return t.position}))}},{key:"create",value:function(t){var e=t.id,r=t.position,n=this.game.map.getRelativeCoords(r);if(this.game.map.areCoordsInView(n)){var o=new $t(this.game,{id:e,position:r});return this.collection.set(o.id,o),o.updatePosition(r),o.updateCoordsInView(),o.render(),o}}},{key:"remove",value:function(t){this.get(t).sprite.remove(),this.collection.delete(t)}},{key:"get",value:function(t){return this.collection.get(t)}},{key:"init",value:function(){var t,e=this;null==this||null===(t=this.playersData)||void 0===t||t.forEach((function(t){e.create(t)})),delete this.playersData,this.init=null}},{key:"updatePositions",value:function(){this.collection.forEach((function(t){t.updatePosition(t.position)}))}},{key:"updateCoordsInView",value:function(){this.collection.forEach((function(t){t.updateCoordsInView()}))}},{key:"render",value:function(){this.init?this.init():this.collection.forEach((function(t){t.render()}))}}],r&&Kt(e.prototype,r),n&&Kt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();r(7327);class Gt{constructor({gridState:t,cols:e,rows:r}){this.gridState=t,this.cols=e,this.rows=r}indexToCoords(t){const e=t%this.cols;return[e,(t-e)/this.rows]}coordsToIndex([t,e]){return this.cols*e+t}checkMove(t,e){let[r,n]=this.indexToCoords(t.position);if("left"==e&&0!==r)r--;else if("right"==e&&r!==this.cols-1)r++;else if("up"==e&&0!==n)n--;else{if("down"!=e||n===this.rows-1)return;n++}const o=this.coordsToIndex([r,n]);if(this.isAvailable(o,t))return o}isAvailable(t,e){return e.ownCells.includes(t)||e.allowedCells.includes(t)&&!this.playersPositions.includes(t)&&!this.gridState[t]}}function Xt(t){return Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xt(t)}function Jt(t){return function(t){if(Array.isArray(t))return ee(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||te(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],s=!0,a=!1;try{for(r=r.call(t);!(s=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);s=!0);}catch(t){a=!0,o=t}finally{try{s||null==r.return||r.return()}finally{if(a)throw o}}return i}(t,e)||te(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(t,e){if(t){if("string"==typeof t)return ee(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ee(t,e):void 0}}function ee(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function re(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ne(t,e){return ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ne(t,e)}function oe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=ae(t);if(e){var o=ae(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return ie(this,r)}}function ie(t,e){if(e&&("object"===Xt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return se(t)}function se(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ae(t){return ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ae(t)}function ce(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const ue=Ot(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ne(t,e)}(i,t);var e,r,n,o=oe(i);function i(t,e){var r,n=e.gridState,s=e.rows,a=e.cols;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),ce(se(r=o.call(this,{gridState:n,rows:s,cols:a})),"view",document.getElementById("view")),ce(se(r),"canvas",document.querySelector("canvas")),ce(se(r),"minCellsInView",12),ce(se(r),"startCellsInView",18),ce(se(r),"maxCellsInView",36),ce(se(r),"offScreenCells",2),ce(se(r),"nCellsZoomIncrement",2),ce(se(r),"canvasOrigin",[null,null]),ce(se(r),"canvasOffset",[null,null]),ce(se(r),"maxCoordsInView",[null,null]),ce(se(r),"viewSize",[null,null]),ce(se(r),"positionsColor","black"),ce(se(r),"allowedColor","#e5e5e5"),ce(se(r),"getCoordInView",(function(t,e){return t-r.game.player.coords[e]+r.game.player.coordsInView[e]+r.offScreenCells})),r.game=t,r.ctx=r.canvas.getContext("2d"),r.domElement=r.canvas,r}return e=i,r=[{key:"playersPositions",get:function(){return this.game.players.positions}},{key:"longestDimensionIndex",get:function(){return this.isWidthLarger?0:1}},{key:"shortestDimensionIndex",get:function(){return this.isWidthLarger?1:0}},{key:"setViewSize",value:function(){this.isWidthLarger=window.innerWidth>=window.innerHeight,document.body.className=this.isWidthLarger?"width-larger":"height-larger",this.viewSize=[this.view.offsetWidth,this.view.offsetHeight]}},{key:"updateState",value:function(){for(var t in this.maxCoordsInView[this.longestDimensionIndex]||(this.maxCoordsInView[this.longestDimensionIndex]=this.startCellsInView),this.lastCellSize=this.cellSize,this.cellSize=Math.round(this.viewSize[this.longestDimensionIndex]/this.maxCoordsInView[this.longestDimensionIndex]),this.cellPadding=Math.round(this.game.map.cellSize/8),this.maxCoordsInView[this.shortestDimensionIndex]=Math.round(this.viewSize[this.shortestDimensionIndex]/this.cellSize),[0,1])this.canvasOffset[t]=this.viewSize[t]-this.maxCoordsInView[t]*this.cellSize}},{key:"updateCanvasOrigin",value:function(){for(var t in[0,1])this.canvasOrigin[t]=this.canvasOffset[t]*this.game.player.coordsInViewCoef[t]}},{key:"getRelativeCoords",value:function(t){return this.indexToCoords(t).map(this.getCoordInView)}},{key:"areCoordsInView",value:function(t){var e=Qt(t,2),r=e[0],n=e[1];return r>-this.offScreenCells&&n>-this.offScreenCells&&r-1<=this.maxCoordsInView[0]+this.offScreenCells&&n-1<=this.maxCoordsInView[1]+this.offScreenCells}},{key:"render",value:function(){var t=this;if(!this.game.flags.isTranslating){var e=this.cellSize,r=this.maxCoordsInView,n=this.offScreenCells;this.canvas.width=e*(r[0]+2*n),this.canvas.height=e*(r[1]+2*n),this.canvas.style.top="-".concat(Math.round(n*e),"px"),this.canvas.style.left="-".concat(Math.round(n*e),"px"),this.ctx.imageSmoothingEnabled=!1}this.translateCanvas(0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.game.player.allowedCells.forEach((function(e){t.renderCell(e,t.allowedColor)})),this.filledCells.forEach((function(e){var r=e.color,n=e.position;t.renderCell(n,r)}))}},{key:"filledCells",get:function(){return this.gridState.map((function(t,e){return t&&{color:"#".concat(t),position:e}})).filter(Boolean)}},{key:"renderCell",value:function(t,e){var r=this,n=this.getRelativeCoords(t);if(this.areCoordsInView(n)){var o=n.map((function(t){return Math.round(r.cellSize*t)})),i=Qt(o,2),s=i[0],a=i[1];e?(this.ctx.fillStyle=e,this.ctx.fillRect(s,a,this.cellSize,this.cellSize)):this.ctx.clearRect(s,a,this.cellSize,this.cellSize)}}},{key:"translateCanvas",value:function(t){this.transitionDuration=t;var e=Jt(this.canvasOrigin);if(0!==t){var r=this.game.player,n=r.lastCoords,o=r.coords,i=r.lastCoordsInView,s=r.coordsInView;for(var a in[0,1]){var c=n[a]-o[a]+s[a]-i[a];e[a]+=c*this.cellSize}}this.transform={translation:e}}},{key:"isZoomable",value:function(t){if("in"==t&&this.maxCoordsInView[this.longestDimensionIndex]>this.minCellsInView||"out"==t&&this.maxCoordsInView[this.longestDimensionIndex]<this.maxCellsInView)return!0}},{key:"incrementMaxCoordsInView",value:function(t){var e="in"==t?-1:1;this.maxCoordsInView[this.longestDimensionIndex]+=this.nCellsZoomIncrement*e}},{key:"zoom",value:function(t){this.transitionDuration=t;var e=Math.round(1e3*this.cellSize/this.lastCellSize)/1e3,r=(this.lastCellSize-this.cellSize)*this.offScreenCells,n=this.canvasOrigin.map((function(t){return t+r}));for(var o in[0,1])n[o]+=(this.game.player.coordsInView[o]-this.game.player.lastCoordsInView[o])*this.cellSize;this.transform={translation:n,factor:e}}}],r&&re(e.prototype,r),n&&re(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(Gt));r(6699),r(2023);function le(){var t=this;this.socket.on("NEW_PLAYER_POSITION",(function(e){t.flags.waitingServerConfirmMove=!1,e!==t.player.position&&t.emit("MOVE_PLAYER",e)})),this.socket.on("NEW_POSITION",(function(e){var r=e.id,n=e.from,o=e.to;if(o)if(n){if(o&&o!==t.player.position&&o!==t.player.lastPosition){var i=t.players.get(r);i?(i.updatePosition(o),i.updateCoordsInView(),t.map.areCoordsInView(i.coordsInView)?i.render():t.players.remove(r)):t.players.create({id:r,position:o})}}else t.players.create({id:r,position:o});else t.players.remove(r)})),this.socket.on("NEW_FILL",(function(e){var r=e.id,n=e.position,o=e.color,i=t.players.get(r);i&&(i.setColor(o),i.stampAnimation()),t.map.gridState[n]=o,t.map.renderCell(n,"#".concat(o))})),this.socket.on("ALLOWED_CELLS",(function(e){e.forEach((function(e){t.player.allowedCells.includes(e)||(t.player.allowedCells.push(e),t.flags.isTranslating||t.map.renderCell(e,t.map.allowedColor))}))})),this.socket.on("CONFIRM_FILL",(function(){t.flags.waitingServerConfirmFill=!1})),this.socket.on("ALERT",(function(t){alert(t)})),this.socket.on("reconnect_attempt",(function(){window.location.reload(!0)})),this.socket.on("error",(function(){window.isReloading||window.location.reload(!0)}))}r(3710),r(9714);const fe={colorBtns:document.querySelectorAll(".color"),zoomBtns:{in:document.getElementById("zoomin"),out:document.getElementById("zoomout")},focusColorBtn:function(t){this.colorBtns.forEach((function(e,r){e.className=r===t?"color selected":"color"}))}};function he(){var t=this;fe.colorBtns.forEach((function(e,r){e.style.background=t.player.palette[r],e.addEventListener("mousedown",(function(){t.emit("SELECT_COLOR",r)})),e.addEventListener("mouseup",(function(){t.flags.isTranslating||t.flags.isZooming||t.emit("FILL_ATTEMPT")})),e.addEventListener("touchstart",(function(e){e.preventDefault(),t.emit("SELECT_COLOR",r)})),e.addEventListener("touchend",(function(e){e.preventDefault(),t.flags.isTranslating||t.flags.isZooming||t.emit("FILL_ATTEMPT")}))}));var e=function(e){var r=fe.zoomBtns[e];r.addEventListener("mousedown",(function(){t.flags.zoomBtnPressed=!0,t.emit("ZOOM_ATTEMPT",e)})),r.addEventListener("touchstart",(function(r){r.preventDefault(),t.flags.zoomBtnPressed=!0,t.emit("ZOOM_ATTEMPT",e)})),r.addEventListener("mouseup",(function(){t.flags.zoomBtnPressed=!1})),r.addEventListener("touchend",(function(e){e.preventDefault(),t.flags.zoomBtnPressed=!1}))};for(var r in fe.zoomBtns)e(r);document.addEventListener("click",(function(){"[object HTMLButtonElement]"==document.activeElement.toString()&&document.activeElement.blur()}))}var pe=!1;function de(){var t=this;document.addEventListener("keydown",(function(e){"MetaLeft"!==e.code&&"MetaRight"!==e.code&&"AltLeft"!==e.code&&"AltRight"!==e.code&&"ControlLeft"!==e.code&&"ControlRight"!==e.code?t.flags.isTranslating||t.flags.waitingServerConfirmMove||ye.call(t,e):pe=!0})),document.addEventListener("keyup",(function(t){"MetaLeft"!==t.code&&"MetaRight"!==t.code&&"AltLeft"!==t.code&&"AltRight"!==t.code&&"ControlLeft"!==t.code&&"ControlRight"!==t.code||(pe=!1)}))}function ye(t){switch(t.code){case"Space":case"Enter":this.emit("FILL_ATTEMPT");break;case"ArrowLeft":this.emit("MOVE_ATTEMPT","left");break;case"ArrowRight":this.emit("MOVE_ATTEMPT","right");break;case"ArrowUp":if(pe){var e=this.player.palette.length,r=(e+this.player.selectedColorIndex-1)%e;this.emit("SELECT_COLOR",r)}else this.emit("MOVE_ATTEMPT","up");break;case"ArrowDown":if(pe){var n=this.player.palette.length,o=(n+this.player.selectedColorIndex+1)%n;this.emit("SELECT_COLOR",o)}else this.emit("MOVE_ATTEMPT","down")}}r(2564);function ve(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],s=!0,a=!1;try{for(r=r.call(t);!(s=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);s=!0);}catch(t){a=!0,o=t}finally{try{s||null==r.return||r.return()}finally{if(a)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ge(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ge(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function me(){this.map.view.addEventListener("touchstart",be.bind(this),!1),this.map.view.addEventListener("touchmove",xe.bind(this),!1),this.map.view.addEventListener("touchend",we.bind(this),!1)}function be(t){this.flags.isTouching=!0,Oe.setOrigin(t)}function we(){this.flags.isTouching=!1,Oe.setLimit(),Oe.start=[null,null],Oe.direction=null,Oe.lastDirection=null}function xe(t){var e=this;if(Oe.start[0]&&Oe.start[1]&&(Oe.getDelta(t),Oe.getDirection(),Oe.lastDirection||Oe.saveDirection(),!(this.flags.waitingServerConfirmMove||this.flags.isTranslating||Oe.isTooSmall()))){this.emit("MOVE_ATTEMPT",Oe.direction),Oe.setOrigin(t),Oe.setLimit(120),Oe.saveDirection();var r=setInterval((function(){!e.flags.waitingServerConfirmMove&&!e.flags.isTranslating&&e.flags.isTouching&&Oe.direction&&e.emit("MOVE_ATTEMPT",Oe.direction),e.flags.isTouching||clearInterval(r)}),20)}}var Oe={start:[null,null],delta:[null,null],direction:null,lastDirection:null,limit:80,setOrigin:function(t){this.start[0]=t.touches[0].clientX,this.start[1]=t.touches[0].clientY},setLimit:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;this.limit=t},getDelta:function(t){this.delta[0]=this.start[0]-t.touches[0].clientX,this.delta[1]=this.start[1]-t.touches[0].clientY},getDirection:function(){var t=ve(this.delta,2),e=t[0],r=t[1];Math.abs(e)>Math.abs(r)?this.direction=e>0?"left":"right":this.direction=r>0?"up":"down"},saveDirection:function(){this.lastDirection=this.direction},useLastDir:function(){this.direction=this.lastDirection},isSameDirection:function(){return this.lastDirection===this.direction},isTooSmall:function(){return Math.abs(Oe.delta[0])<Oe.limit&&Math.abs(Oe.delta[1])<Oe.limit}};function Se(){var t=this;window.addEventListener("resize",this.fullRender),window.addEventListener("orientationchange",(function(){setTimeout(t.fullRender,500)}))}const Ee={SELECT_COLOR:function(t){this.player.setColor(t),fe.focusColorBtn(t)},MOVE_ATTEMPT:function(t){if(!(this.flags.waitingServerConfirmMove||this.flags.isTranslating||this.flags.isStamping||this.flags.isFilling||this.flags.isZooming)){this.socket.emit("MOVE",t);var e=this.map.checkMove(this.player,t);e?this.emit("MOVE_PLAYER",e,t):this.player.bumpAnimation(t)}},MOVE_PLAYER:function(t,e){var r=this;this.flags.waitingServerConfirmMove=!0,this.flags.isTranslating=!0,this.updateState(t,e),this.map.translateCanvas(this.durations.translation),this.animationTimeout((function(){r.map.render(),r.flags.isTranslating=!1}),this.durations.translation),this.player.render(),this.players.render()},FILL_ATTEMPT:function(){this.flags.waitingServerConfirmFill||this.flags.isFilling||this.emit("FILL_PLAYER_CELL",this.player.position)},FILL_PLAYER_CELL:function(t){this.player.ownCells.includes(t)||this.player.ownCells.push(t),this.fillAnimation(t,this.player.selectedColor);var e=this.player.selectedColor.substring(1);this.map.gridState[t]=e,this.socket.emit("FILL",{position:t,color:e}),this.flags.waitingServerConfirmFill=!0,this.player.stampAnimation()},ZOOM_ATTEMPT:function(t){var e=this;this.flags.isZooming||this.flags.isTranslating||!this.map.isZoomable(t)||(this.flags.isZooming=!0,this.map.incrementMaxCoordsInView(t),this.updateState(),this.map.zoom(this.durations.zoom),this.animationTimeout((function(){e.map.render(),e.flags.zoomBtnPressed?e.animationTimeout((function(){e.flags.isZooming=!1,e.emit("ZOOM_ATTEMPT",t)}),10):e.flags.isZooming=!1}),this.durations.zoom),this.player.render(),this.players.render())}};r(3843),r(3689);function Ce(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],s=!0,a=!1;try{for(r=r.call(t);!(s=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);s=!0);}catch(t){a=!0,o=t}finally{try{s||null==r.return||r.return()}finally{if(a)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Te(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Te(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ke(t,e){this.flags.isFilling=!0;var r=this.durations.fillAnimation,n=this.map.cellSize,o=Ce(this.map.getRelativeCoords(t).map((function(t){return Math.round(t*n)})),2),i=o[0],s=o[1],a=Math.floor(n/8),c=8-n%8,u=this.map.ctx,l=this.flags;function f(t){var r=t.yIndex,o=t.prevYIndex,l=t.lineX,f=t.prevLineX;if(r===o)p(r,{from:f,to:l});else{p(o,{from:f,to:n});for(var h=o+1;h<r;h++)p(h,{from:0,to:n});p(r,{from:0,to:l})}function p(t,r){var o=r.from,l=r.to;function f(t){var r=t.lineWidth,n=t.lineY;u.lineWidth=r,u.strokeStyle=e,u.beginPath(),u.moveTo(i+o,s+n),u.lineTo(i+l,s+n),u.stroke()}t<c?f({lineWidth:a,lineY:n-a*(t+.5)}):t<8&&f({lineWidth:a+1,lineY:(a+1)*(8-(t+.5))})}}!function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.prevYIndex,i=void 0===o?0:o,s=e.prevLineX,a=void 0===s?0:s,c=e.startDate,u=void 0===c?Date.now():c,h=Date.now()-u,p=8*h/r,d=Math.trunc(p),y=Math.round((p-d)*n);f({yIndex:d,prevYIndex:i,lineX:y,prevLineX:a}),h<r?window.requestAnimationFrame((function(){t({prevYIndex:d,prevLineX:y,startDate:u})})):l.isFilling=!1}()}function Ae(t,e){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now(),o=Date.now()-n;o>=e?t():window.requestAnimationFrame((function(){r.animationTimeout(t,e,n)}))}function Re(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ie(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var _e=function(){function t(e,r){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Ie(this,"durations",{translation:200,zoom:150,fillAnimation:300}),Ie(this,"flags",{waitingServerConfirmMove:!1,waitingServerConfirmFill:!1,isTranslating:!1,isZooming:!1,isTouching:!1,isFilling:!1,isStamping:!1,isFullRendering:!1}),Ie(this,"fullRender",(function(){n.flags.isFullRendering=!0,n.map.setViewSize(),n.updateState(),n.render(),n.flags.isFullRendering=!1})),this.socket=e,this.map=new ue(this,r.map),this.player=new Nt(this,r.player),this.players=new Zt(this,r.players),this.events=Ee,this.fillAnimation=ke.bind(this),this.animationTimeout=Ae.bind(this)}var e,r,n;return e=t,r=[{key:"init",value:function(){he.call(this),de.call(this),me.call(this),Se.call(this),le.call(this),this.emit("SELECT_COLOR",0),this.fullRender()}},{key:"updateState",value:function(t,e){this.player.updatePosition(t,e),(this.flags.isZooming||this.flags.isFullRendering)&&this.map.updateState(),this.player.updateCoordsInView(),this.map.updateCanvasOrigin(),this.players.updateCoordsInView()}},{key:"render",value:function(){this.map.render(),this.player.render(),this.players.render()}},{key:"emit",value:function(t){for(var e,r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];(e=this.events[t]).call.apply(e,[this].concat(n))}}],r&&Re(e.prototype,r),n&&Re(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),je=document.getElementById("menu"),Pe={fill:document.getElementById("help-block-fill"),move:document.getElementById("help-block-move"),zoom:document.getElementById("help-block-zoom")};function Le(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=0,o=e;n<o.length;n++){var i=o[n];Pe[i].style.display="flex"}}function Be(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=0,o=e;n<o.length;n++){var i=o[n];Pe[i].style.display="none"}}var De=document.getElementById("help-btn");function Me(){De.addEventListener("click",(function(){je.classList.toggle("open"),je.classList.contains("open")?Le("zoom","move","fill"):Be("zoom","move","fill")}))}var Ne=dt("/game");Ne.once("INIT_GAME",(function(t){new _e(Ne,t).init(),0===t.player.ownCells.length?function(t){function e(){Le("move"),t.once("NEW_PLAYER_POSITION",(function(){Be("move"),setTimeout(r,1e3)}))}function r(){je.classList.add("open"),Le("zoom"),setTimeout(n,3e3)}function n(){je.classList.remove("open"),Be("zoom","move","fill"),Me()}setTimeout((function(){Le("fill"),t.once("CONFIRM_FILL",(function(){Be("fill"),setTimeout(e,1e3)}))}),1e3)}(Ne):Me()}))})()})();